var dateStart=(new Date).getTime();$(document).ready(function(){function a(a,b,c){$.ajax({type:a,data:b,url:"actions.php",complete:function(){},statusCode:{200:function(a){},403:function(a){var b=JSON.parse(a.responseText);$("body").prepend(b.message)}},error:function(a,b,c,d){console.log("error")},success:c})}function b(a){$("#player .info").html(a.data("stationTitle"))}function c(){var a=("0"+parseInt(e.currentTime%60)).slice(-2),b=("0"+parseInt(e.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(b),$("#player .time .seconds").html(a)}function d(b){console.log(b),a("POST",{action:"getStation",id:b},function(a){for(var b=JSON.parse(a),c=$(".playlistContainer"),d="",e=0;e<b.length;e++){var f=b[e];d+='<div class="track" data-station-id="'+f.station_id+'" data-station-title="'+f.station_title+'" data-station-url="'+f.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+f.station_title+'</div><div class="url">'+f.station_url+"</div></div>"}c.html(c.html()+d),c.find(".track:first").addClass("selected")})}var e=($(".playerContainer"),new Audio),f={volume:e.volume};$("#player .play").click(function(a){$(".playlistContainer").children(".selected").length>0&&(e.src=$(".playlistContainer .selected").data("stationUrl"),console.log(e.src),e.play(),b($(".playlistContainer .selected")),c(),setInterval(function(){c()},1e3))}),$("#player .stop").click(function(a){e.pause(),e.currentTime=0,$("#player .info").html("")}),f.volume=e.volume,void 0==Cookies.get("volume")&&Cookies.set("volume",e.volume,{expires:180,path:"/"}),e.volume=Cookies.get("volume"),$("#player .volume input").val(100*e.volume),$("#player .volume input").on("input",function(a){e.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),Cookies.set("volume",e.volume,{expires:180,path:"/"})}),$(".playlistContainer").on("mouseover",".track",function(a){$(this).addClass("hovered")}),$(".playlistContainer").on("mouseout",".track",function(a){$(this).removeClass("hovered")}),$(".playlistContainer").on("mousedown",".track",function(a){console.log($(this)),$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(a){var d=$(this).data("stationUrl");e.src=d,console.log($(this)),b($(this)),c(),e.play()}),$("#player .find input").on("keyup",function(b){var c=$(this).val();c.length>2&&a("POST",{action:"find",target:c},function(a){var b=JSON.parse(a),c=$(".searchContainer .result");c.html("");for(var d='<div class="total"><span>'+b.length+"</span> stations is found</div>",e=0;e<b.length;e++){var f=b[e];d+='<div class="station" data-station-id="'+f.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+f.station_title+'</div><div class="url">'+f.station_url+"</div></div>"}c.html(d),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(a){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(a){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(a){d($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(a){d($(this).data("stationId"))})}),$(window).load(function(){var a=(new Date).getTime();console.log(a-dateStart+"ms")});