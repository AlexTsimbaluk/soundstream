function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle"),n=250;l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(n/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState")){new l("Default");g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g))}else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,"От 3 до 20 символов",t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,"От 5 символов",t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++){e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>"}$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(a){for(var e="",s=0;s<a;s++)e+=String.fromCharCode(t(33,127));return e}function e(){var t,a,e,s=g.playlists[g.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function s(){var t=("0"+parseInt(u.currentTime%60)).slice(-2),a=("0"+parseInt(u.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",g.playlists[g.currentPlaylist].tracks.push(+l.station_id),g.playlists[g.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(g)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function l(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',g.playlists[t]=this,g.playlistsOrder.push(this.name)}function n(t){clearInterval(f),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(f=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function r(t){clearInterval(f),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function o(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),console.log(a(9)),$("body").attr("data-useragent",navigator.userAgent);var c=$("#player .playlistContainer"),d=$("#player .playlistsPanel"),u=new Audio,p={reg:!1,auth:!1},g={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:u.volume,paused:u.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(p)):(p=JSON.parse(localStorage.userStatus),console.log(p)),void 0==localStorage.getItem("playerState"))new l("Default"),g.currentPlaylist="Default",d.append('<div class="plName" data-name="Default">Default</div>'),c.append(g.playlists[g.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(g));else{g=JSON.parse(localStorage.getItem("playerState"));for(var v=0;v<g.playlistsOrder.length;v++)d.append('<div class="plName" data-name="'+g.playlistsOrder[v]+'">'+g.playlistsOrder[v]+"</div>");u.volume=g.volume,u.src=g.playlists[g.currentPlaylist].currentTrack.url,u.paused=g.paused,c.append(g.playlists[g.currentPlaylist].htmlEl);var h=g.playlists[g.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:h},success:function(t){for(var a=JSON.parse(t),i=c.find('.playlist[data-name="'+g.currentPlaylist+'"]'),l="",r=0;r<a.length;r++){var o=a[r];l+='<div class="track" data-station-id="'+o.station_id+'" data-station-title="'+o.station_title+'" data-station-url="'+o.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}i.html(i.html()+l),i.find(".track[data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]").addClass("selected"),g.paused||(u.play(),e(),s(),setInterval(function(){s()},1e3),n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")))}})}var f=null;if($("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")};var a=$(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]");u.src=$(".playlistContainer .selected").data("stationUrl"),u.play(),g.paused=u.paused,n(a),e(),s(),localStorage.setItem("playerState",JSON.stringify(g)),setInterval(function(){s()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");u.src=a,u.play(),g.playlists[g.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:u.src,title:$(".playlistContainer .selected").data("stationTitle")},n($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g)),e(),s(),setInterval(function(){s()},1e3)}),$("#player .stop").click(function(t){r($(".playlistContainer .active [data-station-id="+g.playlists[g.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),u.pause(),u.currentTime=0,g.paused=u.paused,localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=g.playlists[g.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(g))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*u.volume),$("#player .volume .val").html(Math.floor(100*u.volume)),$("#player .volume input").on("input",function(t){u.volume=parseFloat($(this).val()/100),g.volume=u.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(g))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){o(this)}}}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var m=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(m),$(".searchContainer, .playlistContainer","#player").height(m)}}),$(window).load(function(){}),$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;console.log(a),console.log(e),console.log(s),console.log(i),$.ajax({success:function(t){}})}t(!1)});var dateStart=(new Date).getTime();$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):(d=JSON.parse(localStorage.userStatus),console.log(d)),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragentClient:a,platformClient:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function a(t){navigator.userAgent,navigator.oscpu||navigator.platform,screen.width,screen.height,window.innerWidth,window.innerHeight,$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var e;void 0==localStorage.uniqHash?(console.log("+uniq visit"),e=getHash(8),localStorage.uniqHash=e,t(e)):(e=localStorage.uniqHash,a(e),console.log("+hit"))});var dateStart=(new Date).getTime();$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):(d=JSON.parse(localStorage.userStatus),console.log(d)),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),console.log(navigator),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t,a){t.fadeOut(a)}function a(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function e(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".popup-overlay, .close-popup").click(function(a){t($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(t){var e=$(".form-reg .regLogin");e.val().length>2&&$.ajax({type:"POST",data:{action:"unique",regLogin:e.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error"),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUnique").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniques"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUnique").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUnique").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUnique").html("Good choice!"),setTimeout(function(){$(".loginsUnique").html("")},4e3))}}),a($(this)),t.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){e($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var s=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return a(s)&&a(i)&&e(i,l)&&!s.hasClass("busy")&&$.ajax({type:"POST",data:{regLogin:s.val(),regPass:i.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return a(e)&&a(s)&&$.ajax({type:"POST",data:{authLogin:e.val(),authPass:s.val()},url:"actionsRegistration.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log(t),$(".registration-bad").html("NO AJAX")},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragentClient:a,platformClient:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function a(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var e;void 0==localStorage.uniqHash?(console.log("+uniq visit"),d("+uniq visit"),e=getHash(8),localStorage.uniqHash=e,t(e)):(e=localStorage.uniqHash,a(e),console.log("+hit"),d("+hit "+e))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle");l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(250/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState"))new s("Default"),u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u));else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++)e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>";$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});var dateStart=(new Date).getTime();$(".clearLocalStorage").on("click",function(t){return localStorage.clear(),!1}),$(".clearUniqHash").on("click",function(t){return localStorage.removeItem("uniqHash"),!1}),$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,s){console.log("error")}}),$(document).ready(function(){function t(){var t,a,e,s=u.playlists[u.currentPlaylist].currentTrack.title,i=s.length,l=$("#player .info .trackTitle"),n=250;l.html(s).removeClass("runningString").parent().css({width:"auto"}),a=l.width(),e=a/i,t=Math.floor(n/e)-5,a>240?(console.log(a,i,e,t),console.log(s.length),window.innerWidth>700?l.addClass("runningString").parent().css({width:"240px"}):l.html(s.substr(0,t)+"...")):l.removeClass("runningString").parent().css({width:"auto"})}function a(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function e(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),s="",i=0;i<a.length;i++){var l=a[i];s+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",u.playlists[u.currentPlaylist].tracks.push(+l.station_id),u.playlists[u.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(u)),e.html(e.html()+s),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',u.playlists[t]=this,u.playlistsOrder.push(this.name)}function i(t){clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,s=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++s%360+", 100%, 50%)",borderColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++s%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++s%360+", 100%, 50%)"})},50))}function l(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}function n(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}$("body").attr("data-useragent",navigator.userAgent);var r=$("#player .playlistContainer"),o=$("#player .playlistsPanel"),c=new Audio,d={reg:!1,auth:!1},u={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:c.volume,paused:c.paused};if(void 0==localStorage.getItem("userStatus")?localStorage.setItem("userStatus",JSON.stringify(d)):d=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("playerState")){new s("Default");u.currentPlaylist="Default",o.append('<div class="plName" data-name="Default">Default</div>'),r.append(u.playlists[u.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(u))}else{u=JSON.parse(localStorage.getItem("playerState"));for(var p=0;p<u.playlistsOrder.length;p++)o.append('<div class="plName" data-name="'+u.playlistsOrder[p]+'">'+u.playlistsOrder[p]+"</div>");c.volume=u.volume,c.src=u.playlists[u.currentPlaylist].currentTrack.url,c.paused=u.paused,r.append(u.playlists[u.currentPlaylist].htmlEl);var g=u.playlists[u.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:g},success:function(e){for(var s=JSON.parse(e),l=r.find('.playlist[data-name="'+u.currentPlaylist+'"]'),n="",o=0;o<s.length;o++){var d=s[o];n+='<div class="track" data-station-id="'+d.station_id+'" data-station-title="'+d.station_title+'" data-station-url="'+d.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+d.station_title+'</div><div class="url">'+d.station_url+"</div></div>"}l.html(l.html()+n),l.find(".track[data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]").addClass("selected"),u.paused||(c.play(),t(),a(),setInterval(function(){a()},1e3),i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")))}})}var v=null;if($("#player .play").click(function(e){if($(".playlist").children(".selected").length>0){u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]");c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),u.paused=c.paused,i(s),t(),a(),localStorage.setItem("playerState",JSON.stringify(u)),setInterval(function(){a()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(e){var s=$(this).data("stationUrl");c.src=s,c.play(),u.playlists[u.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},i($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u)),t(),a(),setInterval(function(){a()},1e3)}),$("#player .stop").click(function(t){l($(".playlistContainer .active [data-station-id="+u.playlists[u.currentPlaylist].currentTrack.id+"]")),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),c.pause(),c.currentTime=0,u.paused=c.paused,localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=u.playlists[u.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("playerState",JSON.stringify(u))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*c.volume),$("#player .volume .val").html(Math.floor(100*c.volume)),$("#player .volume input").on("input",function(t){c.volume=parseFloat($(this).val()/100),u.volume=c.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(u))}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:200},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),s='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var i=0;i<a.length;i++){var l=a[i];s+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(s),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){$(this).toggleClass("active"),$(".spinner").show(),$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t);result=$(".searchContainer .result"),markup='<div class="total"><span>'+a.length+"</span> stations is found</div>",result.html("");for(var e=0;e<a.length;e++){var s=a[e];markup+='<div class="station" data-station-id="'+s.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+s.station_title+'</div><div class="url">'+s.station_url+"</div></div>"}result.html(markup),$(".spinner").hide(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}})}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".add",function(t){e($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){e($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){n(this)}}}),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),window.innerHeight<=640&&window.innerWidth<700){var h=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());console.log(h),$(".searchContainer, .playlistContainer","#player").height(h)}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",s=0;s<a.length;s++){e+='<div class="fieldUniq"><div class="field">'+a[s].user_login+"</div></div>"}$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,"От 3 до 20 символов",t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,"От 5 символов",t.position().top);var e=t.val(),s=!0;return 0!=e.search(a)?(t.addClass("error"),s=!1):t.removeClass("error"),s}function s(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300)}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val())}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var s=$(".form-reg .regLogin");s.val().length>2&&t(s.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){s($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),i=$(".form-reg .regPass"),l=$(".form-reg .regPassEx");return e(a)&&e(i)&&s(i,l)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:i.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),s=$(".form-auth .authPass");return e(a)&&e(s)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:s.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(s){s=JSON.parse(s),s.length>0?(e(t),console.log("hit")):(a(t),console.log("uniq visit today"))}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,s=screen.width+"*"+screen.height,i=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:s,browsersize:i,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var s;void 0==localStorage.getItem("uniqHash")?(s=getHash(8),localStorage.setItem("uniqHash",s),a(s),console.log("+uniq visit first")):(s=localStorage.getItem("uniqHash"),t(s))});