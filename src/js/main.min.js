var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());window.innerWidth>700&&(v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50))}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState")){new s("Default");p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p))}else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block",left:-parseInt($(".searchContainer").css("width")),top:-parseInt($(".searchContainer").css("borderWidth"))}).parent().addClass("no-translate")}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block",left:-parseInt($(".searchContainer").css("width")),top:"-4px"}).parent().addClass("no-translate"),console.log(parseInt($(".searchContainer").css("borderWidth")))}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(),$("#player").removeClass("no-translate")}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12);n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track"));$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused
};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block",left:-parseInt($(".searchContainer").css("width")),top:-parseInt($(".searchContainer").css("borderWidth"))}).parent().addClass("no-translate")}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block",left:-parseInt($(".searchContainer").css("width")),top:-parseInt($(".searchContainer").css("borderWidth"))}).parent().addClass("no-translate")}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(),$("#player").removeClass("no-translate")}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")
};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),
$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,
Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={
playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){
var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");
console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());
v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];
i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");
console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());
v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),
l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){
var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){
$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),
u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){$("#player .info").html(p.playlists[p.currentPlaylist].currentTrack.title)}function e(){var t=("0"+parseInt(d.currentTime%60)).slice(-2),a=("0"+parseInt(d.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function i(t){$.ajax({data:{action:"getStation",id:t},success:function(t){for(var a=JSON.parse(t),e=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",p.playlists[p.currentPlaylist].tracks.push(+l.station_id),p.playlists[p.currentPlaylist].currentTrack={id:l.station_id,url:l.station_url,title:l.station_title}}localStorage.setItem("playerState",JSON.stringify(p)),e.html(e.html()+i),e.find(".track").removeClass("selected"),e.find(".track:last").addClass("selected")}})}function s(t){this.name=t,this.tracks=[],this.currentTrack={},this.htmlEl='<div class="playlist active sortable" data-name="'+this.name+'">',p.playlists[t]=this,p.playlistsOrder.push(this.name)}function l(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation").removeAttr("style"),t.addClass("visualisation"),$("#player .play").addClass("visualisation"),$("#player .play span").remove(),$("#player .play.visualisation").prepend('<span class="inner"></span><span class="outer"></span>');var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++i%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function n(t){clearInterval(v),t.removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),$("#player .play span").remove()}$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")}});var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=$("#player .playlistContainer"),c=$("#player .playlistsPanel"),d=new Audio,p={playlists:{},playlistsOrder:[],currentPlaylist:"",volume:d.volume,paused:d.paused};if(void 0==localStorage.getItem("playerState"))new s("Default"),p.currentPlaylist="Default",c.append('<div class="plName" data-name="Default">Default</div>'),o.append(p.playlists[p.currentPlaylist].htmlEl),localStorage.setItem("playerState",JSON.stringify(p));else{p=JSON.parse(localStorage.getItem("playerState"));for(var u=0;u<p.playlistsOrder.length;u++)c.append('<div class="plName" data-name="'+p.playlistsOrder[u]+'">'+p.playlistsOrder[u]+"</div>");d.volume=p.volume,d.src=p.playlists[p.currentPlaylist].currentTrack.url,d.paused=p.paused,o.append(p.playlists[p.currentPlaylist].htmlEl);var y=p.playlists[p.currentPlaylist].tracks;$.ajax({data:{action:"getPlaylistStations",id:y},success:function(t){for(var i=JSON.parse(t),s=o.find('.playlist[data-name="'+p.currentPlaylist+'"]'),n="",r=0;r<i.length;r++){var c=i[r];n+='<div class="track" data-station-id="'+c.station_id+'" data-station-title="'+c.station_title+'" data-station-url="'+c.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+c.station_title+'</div><div class="url">'+c.station_url+"</div></div>"}s.html(s.html()+n),s.find(".track[data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]").addClass("selected"),p.paused||(d.play(),a(),e(),setInterval(function(){e()},1e3),l($(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]")))}})}var v=null;$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var i=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");console.log(i),d.src=$(".playlistContainer .selected").data("stationUrl"),d.play(),p.paused=d.paused,l(i),a(),e(),localStorage.setItem("playerState",JSON.stringify(p)),setInterval(function(){e()},1e3)}}),$(".playlistContainer").on("dblclick",".track",function(t){var i=$(this).data("stationUrl");d.src=i,d.play(),p.playlists[p.currentPlaylist].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:d.src,title:$(".playlistContainer .selected").data("stationTitle")};var s=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");l(s),p.paused=d.paused,localStorage.setItem("playerState",JSON.stringify(p)),a(),e(),setInterval(function(){e()},1e3)}),$("#player .stop").click(function(t){d.pause(),$("#player .play").removeClass("visualisation"),p.paused=d.paused;var a=$(".playlistContainer .active [data-station-id="+p.playlists[p.currentPlaylist].currentTrack.id+"]");n(a),localStorage.setItem("playerState",JSON.stringify(p)),d.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=p.playlists[p.currentPlaylist];e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),console.log(p),localStorage.setItem("playerState",JSON.stringify(p))}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$("#player .volume input").val(100*d.volume),$("#player .volume .val").html(Math.floor(100*d.volume)),$("#player .volume input").on("input",function(t){d.volume=parseFloat($(this).val()/100),p.volume=d.volume,$("#player .volume .val").html($(this).val()),localStorage.setItem("playerState",JSON.stringify(p))}),$("#player .find .showFieldSearch").click(function(t){var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:212},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$("#player .find .showAll").on("click",function(t){$.ajax({data:{action:"getAllStations"},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})}})}),$(".searchContainer .close").on("click",function(t){$(this).parents(".searchContainer").slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){i($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){i($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0}),$("body").css({background:'url("../img/bg/bg'+t(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){c[t]=a,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(o.currentTime%60)).slice(-2),a=("0"+parseInt(o.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={},console.log(this)}a(12),n.prototype.addTrack=function(t){console.log(this),i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",console.log(this),this.tracks.push(+l.id)}c.playlists[this.name]=this,console.log(c),Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")}),this.tracks.push(t)},n.prototype.deleteTrack=function(t){};var r=$("body");r.attr("data-useragent",navigator.userAgent);var o=new Audio,c={playlists:[],currentPlaylist:0,volume:o.volume,paused:o.paused};if(void 0==Cookies.get("playerState")){console.log("cookie undefined");var d=new n("Default",!0);c.playlists.Default=d,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"})}else c=JSON.parse(Cookies.get("playerState")),o.volume=c.volume,console.log(c.playlists),o.paused=c.paused;$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(o.src=$(".playlistContainer .selected").data("stationUrl"),o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){o.pause(),c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),o.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*o.volume),$("#player .volume input").on("input",function(a){o.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",o.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");o.src=a,o.play(),d.currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:o.src,title:$(".playlistContainer .selected").data("stationTitle")},c.playlists[0]=d,c.paused=o.paused,Cookies.set("playerState",JSON.stringify(c),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){
d.addTrack($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){d.addTrack($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){u[t]=a,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(p.currentTime%60)).slice(-2),a=("0"+parseInt(p.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t,a){i("POST",{action:"getStation",id:t},function(t){for(var e=JSON.parse(t),i=$(".playlistContainer .playlist.active"),s="",l=0;l<e.length;l++){var n=e[l];s+='<div class="track" data-station-id="'+n.station_id+'" data-station-title="'+n.station_title+'" data-station-url="'+n.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>";for(var l=0;l<u.playlists.length;l++)u.playlists[l].name==a&&(u.playlists[l].tracks.push(+n.station_id),u.playlists[l].currentTrack={id:n.station_id,url:n.station_url,title:n.station_title},u.currentPlaylist=l)}Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),i.html(i.html()+s),i.find(".track:first").addClass("selected")})}function r(t,a){this.name=t,this.active=a,this.tracks=[],this.currentTrack={}}function o(t){console.log(t),clearInterval(v),t.parent().children(".track:not(.selected)").removeClass("visualisation"),t.addClass("visualisation"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,i=Math.floor(360*Math.random());v=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++i%360+", 100%, 50%)",borderColor:"hsl("+ ++i%360+", 100%, 50%)"})},50)}function c(t){clearInterval(v),t.removeClass("visualisation"),t.css({backgroundImage:"linear-gradient(to right, hsl(0, 0%, 33%) 0%, hsl(0, 0%, 47%) 100%)"}),$("#player .play").css({boxShadow:"none",borderColor:"#0ff"})}var d=(a(12),$("body"));d.attr("data-useragent",navigator.userAgent);var p=new Audio,u={playlists:[],currentPlaylist:0,volume:p.volume,paused:p.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),u.playlists[0]=new r("Default",!0),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),u=JSON.parse(Cookies.get("playerState"));else{u=JSON.parse(Cookies.get("playerState")),p.volume=u.volume,p.src=u.playlists[u.currentPlaylist].currentTrack.url,p.paused=u.paused,console.log($(".playlistContainer .playlist").find(".track")),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));var y=u.playlists[0].tracks;i("POST",{action:"getTargetStations",id:y},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")}),u.paused||(p.play(),$("#player .play").addClass("visualisation"),console.log($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")),o($(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]")))}var v;$("#player .play").on("mouseover",function(t){$(this).css({boxShadow:"0px 0px 5px 0.4px #0ff"})}),$("#player .play").on("mouseout",function(t){$(this).css({boxShadow:"none"})}),$("#player .play").click(function(t){if($(".playlist").children(".selected").length>0){var a=($(".playlistContainer .active .selected"),$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]"));console.log(a),p.src=$(".playlistContainer .selected").data("stationUrl"),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")},p.play(),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),o($(".active [data-station-id="+u.playlists[0].currentTrack.id+"]")),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3)}}),$("#player .stop").click(function(t){u=JSON.parse(Cookies.get("playerState")),p.pause(),u.paused=p.paused;var a=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");c(a),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),p.currentTime=0,$("#player .info").html("")}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parents(".playlist.active").data("name"),e=$(this).parent().data("stationId"),i=console.log(a,e);$(this).parent().remove();for(var s=0;s<u.playlists.length;s++){var i=u.playlists[s];i.name==a&&i.tracks.splice(i.tracks.indexOf(e),1)}console.log(u),Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"})}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");p.src=a,p.play(),u.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:p.src,title:$(".playlistContainer .selected").data("stationTitle")};var e=$(".playlistContainer .active [data-station-id="+u.playlists[0].currentTrack.id+"]");o(e),u.paused=p.paused,Cookies.set("playerState",JSON.stringify(u),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .volume input").val(100*p.volume),$("#player .volume input").on("input",function(a){p.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",p.volume)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"),"Default")}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"),"Default")}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});var dateStart=(new Date).getTime();$(document).ready(function(){function t(t,a){d[t]=a,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"})}function a(t){i("POST",{action:"getStation",id:t},function(t){var a=JSON.parse(t),i=a[0],s={id:i.station_id,title:i.station_title,url:i.station_url};e(s)})}function e(t){return console.log(t),t}function i(t,a,e){$.ajax({type:t,data:a,url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,i){console.log("error")},success:e})}function s(t){$("#player .info").html(t.data("stationTitle"))}function l(){var t=("0"+parseInt(c.currentTime%60)).slice(-2),a=("0"+parseInt(c.currentTime/60%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(a),$("#player .time .seconds").html(t)}function n(t){i("POST",{action:"getStation",id:t},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>",d.playlists[0].tracks.push(+l.station_id)}Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),e.html(e.html()+i),e.find(".track:first").addClass("selected")})}var r=a(12);console.log(r);var o=$("body");o.attr("data-useragent",navigator.userAgent);var c=($(".playlistContainer"),new Audio),d={playlists:[{active:!0,name:"Default",tracks:[],currentTrack:{}}],currentPlaylist:0,volume:c.volume,paused:c.paused};if(void 0==Cookies.get("playerState"))console.log("cookie undefined"),Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"});else{d=JSON.parse(Cookies.get("playerState")),c.volume=d.volume,c.src=d.playlists[0].currentTrack.url,c.paused=d.paused,d.paused||c.play();var p=JSON.parse(Cookies.get("playerState")).playlists[0].tracks;i("POST",{action:"getTargetStations",id:p},function(t){for(var a=JSON.parse(t),e=$(".playlistContainer .playlist"),i="",s=0;s<a.length;s++){var l=a[s];i+='<div class="track" data-station-id="'+l.station_id+'" data-station-title="'+l.station_title+'" data-station-url="'+l.station_url+'"><div class="delete"><i class="fa fa-minus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(e.html()+i),e.find(".track:first").addClass("selected")})}$("#player .play").click(function(t){$(".playlist").children(".selected").length>0&&(c.src=$(".playlistContainer .selected").data("stationUrl"),c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(".playlist .selected")),l(),setInterval(function(){l()},1e3))}),$("#player .stop").click(function(t){c.pause(),d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),c.currentTime=0,$("#player .info").html("")}),$("#player .volume input").val(100*c.volume),$("#player .volume input").on("input",function(a){c.volume=parseFloat($(this).val()/100),$("#player .volume .val").html($(this).val()),t("volume",c.volume)}),$(".playlistContainer").on("mousedown",".track",function(t){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}),$(".playlistContainer").on("dblclick",".track",function(t){var a=$(this).data("stationUrl");c.src=a,c.play(),d.playlists[0].currentTrack={id:$(".playlistContainer .selected").data("stationId"),url:c.src,title:$(".playlistContainer .selected").data("stationTitle")},d.paused=c.paused,Cookies.set("playerState",JSON.stringify(d),{expires:180,path:"/"}),s($(this)),l(),setInterval(function(){l()},1e3)}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&i("POST",{action:"find",target:a},function(t){var a=JSON.parse(t),e=$(".searchContainer .result");e.html("");for(var i='<div class="total"><span>'+a.length+"</span> stations is found</div>",s=0;s<a.length;s++){var l=a[s];i+='<div class="station" data-station-id="'+l.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e.html(i),$(".searchContainer").css({display:"inline-block"})})}),$(".searchContainer .close").on("click",function(t){$(this).parent().slideUp(500)}),$(".searchContainer").on("scroll",function(t){setTimeout(function(){$(".searchContainer").find(".close").animate({top:$(".searchContainer").scrollTop()+10+"px"},100)},50)}),$(".searchContainer").on("click",".add",function(t){n($(this).parent().data("stationId"))}),$(".searchContainer").on("dblclick",".station",function(t){n($(this).data("stationId"))}),$(".sortable").sortable({scroll:!0})}),$(window).load(function(){(new Date).getTime()});