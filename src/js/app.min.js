"use strict";function getParams(){for(var t={},e=window.location.search.substring(1).split("&"),a=0;a<e.length;a++){var r=e[a].split("=");t[r[0]]=void 0===r[1]?"":r[1]}return t}function d(t){$(".debug").html(t)}function getRandomInt(t,e){return Math.floor(Math.random()*(e-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var e="",a=0;a<t;a++)e+=String.fromCharCode(getRandomInt(33,127));return e}function drawRound(t){if(t<=qtMin)contextSquare.stroke();else{for(var e=0;e<t;e++)contextSquare.arc(e*e*fib,3*e,fib*e,0,2*Math.PI),contextSquare.rotate(2*Math.PI*3/(t-1));drawRound(.5*t)}}function addFractal(t){if(t<=qtMin)contextSquare.stroke();else switch(getRandom()){case 1:for(var e=0;e<t/2;e++)contextSquare.strokeRect(0,0,30,20),contextSquare.strokeStyle="rgb(0,"+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+")",contextSquare.stroke(),contextSquare.rotate(3*Math.PI*2/(t-1));addFractal(.3*t);break;case 2:for(var e=0;e<t/3;e++)contextSquare.strokeRect(0,0,45,15),contextSquare.strokeStyle=e%2==0?"rgb("+Math.floor(255-255/t*e)+"0,"+Math.floor(0+255/t*e)+")":"rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+",255)",contextSquare.stroke(),contextSquare.rotate(2*Math.PI*5/(t-1));addFractal(.3*t);break;case 3:for(var e=0;e<t/2;e++)contextSquare.strokeRect(10,50,45,35),e%2==0?(contextSquare.strokeStyle="rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+","+Math.floor(255-255/t*e)+")",contextSquare.stroke()):(contextSquare.strokeStyle="rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+",255)",contextSquare.stroke()),contextSquare.rotate(3*Math.PI*4/(t-1));addFractal(.3*t);break;case 4:for(var e=0;e<t/3;e++)contextSquare.arc(10,30,45,0,2*Math.PI),contextSquare.stroke(),contextSquare.rotate(2*Math.PI*3/(t-1));addFractal(.3*t);break;case 5:for(var e=0;e<t/3;e++)contextSquare.arc(50,50,25,0,2*Math.PI),contextSquare.stroke(),contextSquare.rotate(2*Math.PI*4/(t-1));addFractal(.3*t);break;case 6:for(var e=0;e<t/4;e++)contextSquare.strokeRect(0,0,30,20),contextSquare.strokeStyle="rgb(0,"+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+")",contextSquare.stroke(),contextSquare.rotate(4*Math.PI*3/(t-1));addFractal(.3*t);break;default:for(var e=0;e<t/2;e++)contextSquare.strokeRect(30,0,getRandom()*e,getRandom()*e/1.7),contextSquare.strokeStyle=e%2==0?"rgb("+Math.floor(255-255/t*e)+"0,"+Math.floor(0+255/t*e)+")":"rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+",255)",contextSquare.stroke(),contextSquare.rotate(2*Math.PI*3/(t-1));addFractal(.5*t)}}function drawSquare(t){if(t<=qtMin)contextSquare.stroke();else{for(var e=0;e<t/2;e++)contextSquare.moveTo(10*e-100,10*e-70),contextSquare.lineTo(50+10*e,0+10*e),contextSquare.lineTo(10*e-100,70+10*e),contextSquare.rotate(2*Math.PI/(t-1)),console.log(getRandom(),t/3);drawSquare(.5*t)}}function getRandom(){var t=10*Math.random();return t=Math.round(t)}function drawFractal1(t){for(var e=0;e<t;e++)contextTriangle.strokeRect(0,0,100,133),contextTriangle.strokeStyle=e%2==0?"rgb(0,"+Math.floor(255-255/t*e)+","+Math.floor(255-255/t*e)+")":"rgb("+Math.floor(0+255/t*e)+","+Math.floor(0+255/t*e)+",255)",contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1));for(var e=0;e<t;e++)contextTriangle.strokeRect(0,0,45,45),e%2==0?(contextTriangle.strokeStyle="rgb(0,"+Math.floor(0+255/t*e)+","+Math.floor(255-255/t*e)+")",contextTriangle.stroke()):(contextTriangle.strokeStyle="rgb("+Math.floor(0+255/t*e)+","+Math.floor(255-255/t*e)+",0)",contextTriangle.stroke()),contextTriangle.rotate(2*Math.PI*4/(t-1))}function drawFractalTriangle(t){if(t>50)for(var e=0;e<t;e++)contextTriangle.moveTo(240,40),contextTriangle.lineTo(40,240),contextTriangle.lineTo(440,240),contextTriangle.lineTo(240,40),contextTriangle.stroke(),e%2==0||(contextTriangle.strokeStyle=e%3==0?"rgb(,"+Math.floor(0+255/t*e)+"0,"+Math.floor(0+255/t*e)+")":"rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+",0)"),contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1));else for(var e=0;e<t;e++)contextTriangle.moveTo(240,40),contextTriangle.lineTo(40,240),contextTriangle.lineTo(440,240),contextTriangle.lineTo(240,40),contextTriangle.stroke(),contextTriangle.strokeStyle=e%2==0?"rgb("+Math.floor(255-255/t*e)+"0,"+Math.floor(255-255/t*e)+")":e%3==0?"rgb(0,"+Math.floor(0+255/t*e)+","+Math.floor(0+255/t*e)+")":"rgb("+Math.floor(255-255/t*e)+","+Math.floor(0+255/t*e)+","+Math.floor(255-255/t*e)+")",contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1))}function drawKohLeg(t){if(t>=0){var e=document.getElementById("koh"),a=e.getContext("2d");a.moveTo(0-ln,0),a.lineTo(0,0),a.rotate(Math.PI/1.5),drawKohLeg(t-1)}}function rotate(t,e,a,r,o){var n=Math.cos(o),l=Math.sin(o);return{x:t+(a-t)*n-(r-e)*l,y:e+(r-e)*n+(a-t)*l}}function drawKochCurve(t,e,a,r,o){if(o>0){var n=(2*t+a)/3,l=(2*e+r)/3,i=(t+2*a)/3,s=(e+2*r)/3,c=n+(i-n)*cos+(s-l)*sin,d=l+(s-l)*cos-(i-n)*sin;o--,drawKochCurve(t,e,n,l,o),drawKochCurve(n,l,c,d,o),drawKochCurve(c,d,i,s,o),drawKochCurve(i,s,a,r,o)}else ctx.moveTo(t,e),ctx.lineTo(a,r)}function drawKochSnowflake(t,e,a,r){var o=getEquilateralTriangle(canv.width/2,canv.height/2,a,-Math.PI/12);drawKochCurve(o[0].x,o[0].y,o[1].x,o[1].y,r),drawKochCurve(o[1].x,o[1].y,o[2].x,o[2].y,r),drawKochCurve(o[2].x,o[2].y,o[0].x,o[0].y,r)}function getEquilateralTriangle(t,e,a,r){void 0===r&&(r=0);var o=Math.sqrt(3)/3*a,n=[];n.push(rotate(t,e,t+o,e+o,r));for(var l=1;l<3;l++)n.push(rotate(t,e,t+o,e+o,r+2*Math.PI/3*l));return n}function setC(){color[0]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[1]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[2]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[3]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[4]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[5]=colorsArray[Math.floor(Math.random()*colorsArray.length)];var t=color.toString();return setColor=t.replace(/,/g,""),fullColor="#"+setColor,canvasTriangle.style.borderColor=fullColor,canvasKoh.style.borderColor=fullColor,canv.style.borderColor="#fff",fullColor}function setBg(){color[0]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[1]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[2]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[3]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[4]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[5]=colorsArray[Math.floor(Math.random()*colorsArray.length)];var t=color.toString();return setColorBg=t.replace(/,/g,""),fullColorBg="#"+setColorBg}function setTreeColor(){contextSquare.strokeStyle=setC(),contextTriangle.strokeStyle=setC(),contextKoh.strokeStyle=setC(),ctx.strokeStyle=setC(),contextKoh.stroke(),ctx.stroke()}function setBgColor(){contextSquare.fillStyle=setBg(),contextSquare.fillRect(0,0,canvasSquare.width,canvasSquare.height)}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dateStart=(new Date).getTime();$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var e=JSON.parse(t.responseText);$("body").prepend(e.message)}},error:function(t,e,a,r){consoleOutput("XHR error")}}),void 0!==getParams().admin?$("body").addClass("admin"):$("body").removeClass("admin"),$(document).ready(function(){function t(){C("function::displayState");var t,e,a=v().title,r=a.length,o=$("#player .info .trackTitle"),n=250;$("title").html(a+"::RadioRA"),C(a),o.removeClass("runningString").parent().css({width:"auto"}),t=o.width(),e=t/r,Math.floor(n/e),C(t),C(o.text()),o.addClass("runningString").parent().css({width:"220px"})}function e(t,e){this.name=t,this.tracks=[],this.currentTrack={},q.currentPlaylist=this.name,q.playlistsOrder.push(this.name),M[t]=this,localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))}function a(){var t=this;this.templateTrack=$(".template-track").html(),this.addPanel=function(t){b.find(".list .mCSB_container").append($(M[t].titleHtmlEl));var e=b.find(".playlist").length-1,a=M.playlistPanelWidth||b.find(".playlist:first").innerWidth(),r=a*e;b.find(".playlist:last").attr("data-scroll-left",r)},this.addTrackToPlaylist=function(e){var a=t.makeTrack([e]);w.hasClass("mCustomScrollbar")?w.find(".mCSB_container").append(a):w.append(a),M[q.currentPlaylist].tracks.push(+e),C(M),localStorage.setItem("__playlists",JSON.stringify(M))},this.makeTrack=function(t){for(var e=t,a=$(".template-track").html(),r=[],o=0;o<e.length;o++){var n=I[e[o]],l=$(a);l.attr("data-station-id",n.station_id),l.attr("data-station-title",n.station_title),l.attr("data-station-url",n.station_url),l.find(".title").text(n.station_title),l.find(".url").text(n.station_url),r.push(l)}return r},this.makePlaylistTracks=function(e){for(var a=(M[q.currentPlaylist],t.makeTrack(e)),r=0;r<a.length;r++){var o=a[r];w.hasClass("mCustomScrollbar")?w.find(".mCSB_container").append(o):w.append(o)}w.hasClass("mCustomScrollbar")||$(".playlistContainer").mCustomScrollbar({})},this.setCurrent=function(e,a){$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",b.find("[data-current]").attr("data-scroll-left")),b.find('[data-name="'+q.currentPlaylist+'"]').removeAttr("data-current"),b.find('[data-name="'+e+'"]').attr("data-current",1),q.currentPlaylist=e,w.find(".mCSB_container").children().remove();var r=M[q.currentPlaylist].tracks;r.length&&t.makePlaylistTracks(r),M[q.currentPlaylist].scrollPosition=a,localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))}}function r(t,e,a){var r=this,o=t.createAnalyser();o.smoothingTimeConstant=a.smoothingTimeConstant||.7,o.fftSize=a.fftSize||512,e.connect(o),o.connect(O.destination);var n=function(){o.getByteFrequencyData(r.streamData);for(var t=0,e=0;e<80;e++)t+=r.streamData[e]};setInterval(n,20),r.streamData=new Uint8Array(o.frequencyBinCount)}function o(t){var e=document.getElementById(t),a=this,o=O.createMediaElementSource(e),n=new r(O,o,{smoothingTimeConstant:.5,fftSize:1024}),i=new r(O,o,{smoothingTimeConstant:.5,fftSize:1024}),u=new r(O,o,{smoothingTimeConstant:.5,fftSize:64}),m=new r(O,o,{smoothingTimeConstant:.5,fftSize:512});this.streamData_1=n.streamData,this.streamData_2=i.streamData,this.streamData_3=u.streamData,this.streamData_4=m.streamData,l(e,"AudioApiElement"),this.playStream=function(t){C("AudioApiElement::playStream::Begin"),C(t);var r,o=$('[data-station-url="'+t+'"]');r=o.length?o.position().top:0,$(".playlistContainer").mCustomScrollbar("scrollTo",r),o.parent().find("[data-current-track]").removeAttr("data-current-track"),C(""),C(""),C(o),C(""),C(""),o.attr("data-current-track",1);var n={url:o.attr("data-station-url"),title:o.attr("data-station-title"),id:o.attr("data-station-id"),scrollPosition:r};M[f()].currentTrack=n,e.src=t,e.crossOrigin="anonymous",setTimeout(function(){e.crossOrigin="anonymous"},3e3);var l=e.play();void 0!==l&&l.then(function(){C("AudioApiElement::playPromise::Success::Begin"),C("AudioApiElement::playPromise::Success::End")}).catch(function(){C("AudioApiElement::playPromise::Failed::Begin"),a.stopStream(),R.playStream(t),C("Start audioCbElement"),C("AudioApiElement::playPromise::Failed::End")}),q.paused=e.paused,q.nowPlaying.playlistName?q.nowPlaying.playlistName==q.currentPlaylist?q.nowPlaying.track=n:q.nowPlaying.playlistName!=q.currentPlaylist&&(C("pppp"),q.nowPlaying.playlistName=q.currentPlaylist,q.nowPlaying.track=n):(q.nowPlaying.playlistName=q.currentPlaylist,q.nowPlaying.track=n),localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M)),(window.innerHeight>=720||window.innerWidth>=1e3)&&(s(),c()),d(),C("AudioApiElement::playStream::End")},this.stopStream=function(){h(),$("#player .play").removeClass("visualisation"),W.title="",$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),e.pause(),R.stopStream(),C("AudioApiElement::stopStream"),localStorage.setItem("playerState",JSON.stringify(q))},this.setVolume=function(t){e.volume=t},this.getVolume=function(){return e.volume}}function n(){var t=new Audio;l(t,"AudioCbElement"),this.playStream=function(e){C("AudioCbElement::playStream::Begin"),t.src=e,t.play(),C(t.paused),q.paused=t.paused,localStorage.setItem("playerState",JSON.stringify(q)),C("AudioCbElement::playStream::End")},this.stopStream=function(){h(),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),t.pause(),t.currentTime=0,q.paused=t.paused,C("AudioCbElement::stopStream"),localStorage.setItem("playerState",JSON.stringify(q))},this.setVolume=function(e){t.volume=e},this.getVolume=function(){return t.volume}}function l(e,a){e.addEventListener("abort",function(t){C(a+"::Event.type::"+t.type),$(".spinner").hide()}),e.addEventListener("canplay",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("canplaythrough",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("durationchange",function(t){}),e.addEventListener("emptied",function(t){C(a+"::Event.type::"+t.type),$(".spinner").hide()}),e.addEventListener("encrypted",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("ended",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("error",function(t){C(a+"::Event.type::"+t.type),$(".spinner").hide(),q.paused?(C("paused"),$(".track.waiting").removeClass("waiting").addClass("error-playing")):C("это невозможно")}),e.addEventListener("interruptbegin",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("interruptend",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("loadeddata",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("loadedmetadata",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("loadstart",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("mozaudioavailable",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("pause",function(t){C(a+"::Event.type::"+t.type),C("pause::"+e.paused),e.currentTime=0,q.paused=e.paused,h()}),e.addEventListener("play",function(t){C(a+"::Event.type::"+t.type),$(".spinner").show(),$("[data-current-track]").addClass("waiting")}),e.addEventListener("playing",function(r){C(a+"::Event.type::"+r.type),C("pause::"+e.paused),q.paused=e.paused,$(".spinner").hide(),$("[data-current-track]").hasClass("waiting")&&$("[data-current-track]").removeClass("waiting"),$("[data-current-track]").hasClass("error-playing")&&$("[data-current-track]").removeClass("error-playing"),u(),C(v().title),C(W.title),C(W.trackTitle),W.trackTitle=v().title,C(W.title),C(W.trackTitle),t()}),e.addEventListener("ratechange",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("seeked",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("seeking",function(t){C(a+"::Event.type::"+t.type)}),e.addEventListener("timeupdate",function(t){var a=Math.ceil(e.currentTime),r=("0"+parseInt(Math.floor(a%60))).slice(-2),o=("0"+parseInt(Math.floor(a/60)%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(o),$("#player .time .seconds").html(r)}),e.addEventListener("stalled",function(t){C(a+"::Event.type::"+t.type),$(".spinner").hide()}),e.addEventListener("suspend",function(t){}),e.addEventListener("waiting",function(t){C(a+"::Event.type::"+t.type)})}function i(t,e,a){var r=document.getElementById(t);r.width=e,r.height=a,this.ctx=r.getContext("2d"),this.canvasWidth=r.width,this.canvasHeight=r.height}function s(){var t=new i("canvas-audio-source",500,510);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var e=0;e<A.streamData_1.length;e++){var a=A.streamData_1[e];t.ctx.fillStyle="rgb("+a+","+a+","+a+")",t.ctx.fillRect(e,t.canvasHeight/2+1,1,Math.floor(-a/1.5)),t.ctx.fillRect(e,t.canvasHeight/2-1,1,Math.floor(a/1.5))}requestAnimationFrame(s)}function c(){var t=new i("canvas-audio-source-eq2",500,510);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var e=0,a=A.streamData_2.length;e<a;e++){var r=A.streamData_2[e];t.ctx.fillStyle="rgb("+(255-r)+","+r+","+(255-r)+")",t.ctx.fillRect(a-e,t.canvasHeight/2+1,1,-r/1.5),t.ctx.fillRect(a-e,t.canvasHeight/2-1,1,r/1.5)}requestAnimationFrame(c)}function d(){var t=new i("canvas-audio-source-eq3",288,20);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var e=Math.floor(25.5),a=Math.floor(t.canvasWidth/32),r=Math.floor(t.canvasHeight/e),o=3,n=a+o,l=r+o,s=0;s<A.streamData_3.length;s++)for(var c=A.streamData_3[s],u=Math.floor(c/10),h=0;h<u;h++)t.ctx.strokeStyle="rgb("+(255-c)+","+(255-c)+","+(255-c)+")",t.ctx.strokeRect(s*n,t.canvasHeight-h*l,a,r);requestAnimationFrame(d)}function u(){C("visualisation::Begin"),h();var t=$('.playlistContainer [data-station-id="'+v().id+'"]');t.addClass("visualisation").find(".url").addClass("runningString"),$("#player .play").addClass("visualisation");var e=Math.floor(360*Math.random()),a=e+180,r=Math.floor(360*Math.random());window.innerWidth>700&&(_=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++e%360+", 60%, 50%) 0%, hsl("+ ++a%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++r%360+", 100%, 50%)",borderColor:"hsl("+ ++r%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++r%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+(360-r)%360+", 100%, 50%)"})},50)),C("visualisation::End")}function h(){C("visualisationStop::Begin"),clearInterval(_),$('.playlistContainer [data-station-id="'+v().id+'"]').removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style").find(".url").removeClass("runningString"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),C("visualisationStop::End")}function m(){var t=Math.ceil(+$("#player .volume input").val()/10);F.clearRect(0,0,B,N);for(var e=36*t,a=0,r=3,o=1,n=Math.floor(B/(o+r)),l=Math.floor(n/10*t),i=N,s=i/n,c=0;c<l;c++)F.fillStyle="hsl("+c*e/l+", 100%, 50%)",F.fillRect(c*(o+r),N-c*s-s,r,c*s+s),F.fill();a+=15}function g(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}function f(){return q.currentPlaylist}function v(){return M[f()].currentTrack}function p(t){var e,a=v(),r=$('.playlistContainer [data-station-id="'+a.id+'"]');if("prev"===t)e=r.prev();else{if("next"!==t)throw new Error("Не передано направление!");e=r.next()}if(e.length)return e.attr("data-station-url");C("no siblings")}function y(){var t=$('[data-remove="prop"]'),e=t.find(".removeItem"),a=t.find(".removeItemList"),r=[],o="";e.attr("disabled","disabled"),e.attr("title","Change item of local storage"),r.push({prop:"search.stationsOpened",name:"StationsOpened"}),r.push({prop:"volume",name:"Volume"});for(var n=0;n<r.length;n++)o+='<li class="remove" data-change-prop="'+r[n].prop+'"><a href="#">'+r[n].name+"</a></li>";a.html(o),$("[data-change-prop]").on("click",function(t){var r=$(this).attr("data-change-prop");C(r),C(e),e.attr("data-remove-prop",r),e.removeAttr("disabled"),e.html(r).attr("title","playerState."+r),$("[data-remove-prop]").on("click",function(t){var e=$(this).attr("data-remove-prop"),r=a.find('[data-change-prop="'+e+'"]');switch(e){case"search.stationsOpened":delete q.search.stationsOpened,C("delete playerState."+e);break;case"volume":delete q.volume,C("delete playerState."+e)}return C(q),localStorage.setItem("playerState",JSON.stringify(q)),$(this).html("Reset").attr("disabled","disabled").attr("title","Change prop of playerState").removeAttr("data-remove-prop"),r.remove(),!1})})}function S(){var t=$('[data-remove="item"]'),e=t.find(".removeItem"),a=t.find(".removeItemList"),r=[],o="";e.attr("disabled","disabled"),e.attr("title","Change item of local storage"),r.push({item:"playerState",name:"playerState"}),r.push({item:"stations",name:"stations"}),r.push({item:"stationsOn100",name:"stationsOn100"}),r.push({item:"uniqHash",name:"uniqHash"}),r.push({item:"userStatus",name:"userStatus"}),r.push({item:"localStorage",name:"localStorage"});for(var n=0;n<r.length;n++)o+='<li class="remove" data-change-item="'+r[n].item+'"><a href="#">'+r[n].name+"</a></li>";a.html(o),$("[data-change-item]").on("click",function(t){var r=$(this),o=r.attr("data-change-item");C(r),e.attr("data-remove-item",o),e.removeAttr("disabled"),e.html(o).attr("title","Delete::"+o),$("[data-remove-item]").on("click",function(t){var e=$(this).attr("data-remove-item"),r=a.find('[data-change-item="'+e+'"]');if("stations"==r.attr("data-change-item")||"stationsOn100"==r.attr("data-change-item"))var o=[a.find('[data-change-item="stations"]'),a.find('[data-change-item="stationsOn100"]')];switch(C(r),e){case"playerState":localStorage.removeItem(e),C("delete "+e);break;case"stations":case"stationsOn100":localStorage.removeItem("stations"),localStorage.removeItem("stationsOn100"),C("delete "+e),C("delete "+e+"On100");break;case"uniqHash":case"userStatus":localStorage.removeItem(e),C("delete "+e);break;case"localStorage":localStorage.clear(),C("delete "+e),location.reload()}return $(this).html("Clear").attr("disabled","disabled").attr("title","Change item of local storage").removeAttr("data-remove-item"),o?(a.find('[data-change-item="stations"]').remove(),a.find('[data-change-item="stationsOn100"]').remove()):r.remove(),!1})})}function C(t,e){console.log(t),e||($(".consoleList .mCSB_container").append('<div class="consoleItem">'+$(".consoleItem").length+":"+t+"</div>"),$(".consoleList").mCustomScrollbar("scrollTo",".consoleItem:last"))}if($("body").attr("data-useragent",navigator.userAgent),$.material.init(),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),e=0;e<t.length;e++){var a="/img/bg/bg"+(e+1)+".jpg";t[e]=a}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){g(this)}}}),$("#player .prev").click(function(t){C("prev");var e=p("prev");C(e),e&&(A.stopStream(),A.playStream(e))}),$("#player .next").click(function(t){C("next");var e=p("next");C(e),e&&(A.stopStream(),A.playStream(e))}),$("#player .play").on("click",function(t){q.paused&&(A.playStream(v().url),$(".playlistContainer").mCustomScrollbar("scrollTo",v().scrollPosition))}),$(".playlistContainer").on("click",".track",function(t){if(q.paused){var e=$(this).data("stationUrl");A.playStream(e)}else if($(this).attr("data-current-track"))A.stopStream();else{var e=$(this).data("stationUrl");A.stopStream(),A.playStream(e)}C($(this).position().top)}),$("#player .stop").click(function(t){A.stopStream()}),$(".playlistContainer").on("click",".delete",function(t){var e=$(this).parent().data("stationId"),a=M[q.currentPlaylist];return a.tracks.splice(a.tracks.indexOf(e),1),$(this).parent().remove(),localStorage.setItem("__playlists",JSON.stringify(M)),!1}),$(".playlistContainer").on("click",".canplaytest",function(t){C($(t.target).closest(".track").data("stationUrl")),t.stopPropagation()}),$(".toAdmin").on("click",function(t){return C("toAdmin"),$("body").addClass("admin"),$.ajax({data:{admin:1},success:function(t){$("#player").after(t),$("#player").hide(),$(".toPlayer").on("click",function(t){return C("toPlayer"),$(".admin-wrapper").remove(),$("body").removeClass("admin"),$("#player").fadeIn(300),!1})}}),!1}),$("#player .volume input").on("input",function(t){var e=$(this);A.setVolume(parseFloat($(this).val()/100)),R.setVolume(parseFloat($(this).val()/100)),q.volume=A.getVolume(),q.volume=R.getVolume(),$("#player .volume .val").html($(this).val()),0!=+e.val()?m(Math.ceil(+e.val()/10)):F.clearRect(0,0,B,N),localStorage.setItem("playerState",JSON.stringify(q))}),$("#player .volume").on("wheel",function(t){t=t||window.event;var e=$(this).find("input"),a=t.originalEvent.deltaY||t.originalEvent.detail||t.originalEvent.wheelDelta;return a>0&&+e.val()>0?e.val(+e.val()-2).trigger("input"):a<0&&+e.val()<100&&e.val(+e.val()+2).trigger("input"),!1}),$("#player .volume").on("click",function(t){return t=t||window.event,$(this).find("input").val(t.offsetX).trigger("input"),!1}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var e=$(this).parent().find("input");0==e.hasClass("visible")?(e.addClass("visible").animate({opacity:1,width:190},100),setTimeout(function(){e.focus()},300)):e.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var e=$(this).val();e.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:e},success:function(t){var e=JSON.parse(t),a=$(".searchContainer .result"),r='<div class="total"><span>'+e.length+"</span> stations is found</div>";a.html("");for(var o=0;o<e.length;o++){var n=e[o];r+='<div class="station btn" data-station-id="'+n.station_id+'"><div class="add"><div class="icon">add</div></div><div class="title">'+n.station_title+'</div><div class="url">'+n.station_url+"</div></div>"}a.html(r),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){if($(this).toggleClass("active"),!$(".searchContainer .result .station").length){$(".spinner").show();var e=0;for(var a in I)e++;var r=q.search.stationsOpened||[],o=$(".searchContainer .result"),n=100,l=Math.ceil(e/n),i='<div class="total"><span>'+e+"</span> stations is found</div>";o.html("");for(var s=0;s<l;s++){var c=100*s,d=100*(s+1);s==l-1&&(d=(l-1).toString()+e%100),i+='<div class="stationsBlockToggle" data-show="closed" data-block-number="'+s+'"><div class="title">'+c+".."+d+"</div></div>"}if(o.html(i),$("[data-block-number]").on("click",function(t){var e="",a=$(this).attr("data-block-number");if("closed"==$(this).attr("data-show")){var o=E[a];e+='<div class="stationsBlockList" data-stations-number='+a+">";for(var n=0;n<o.length;n++){var l=o[n];e+='<div class="station" data-station-id="'+l.station_id+'"><div class="title">'+l.station_title+'</div><div class="url">'+l.station_url+"</div></div>"}e+="</div>",$(this).after(e),$(this).attr("data-show","open"),C(r),r.push(a),C(r),r.length>3&&(C("лишний "+r[0]),$('[data-stations-number="'+r[0]+'"]').remove(),$('[data-block-number="'+r[0]+'"]').attr("data-show","closed"),C(r),r.shift(),C(r)),C("stationsBlockToggle №"+a+" opened")}else{var i=r.filter(function(t){return C("filter"),t!=a});r=i,C(r),$(this).next("[data-stations-number]").remove(),$(this).attr("data-show","closed"),C("stationsBlockToggle №"+a+" removed")}return q.search.stationsOpened=r,C(r),C(q.search),C(q.search.stationsOpened),localStorage.setItem("playerState",JSON.stringify(q)),!1}),r.length>0){var u=r[r.length-1],h=$('[data-block-number="'+u+'"]'),m="";r=[],C("targetBlock is "+u);var g=E[u];m+='<div class="stationsBlockList" data-stations-number='+u+">";for(var s=0;s<g.length;s++){var f=g[s];m+='<div class="station" data-station-id="'+f.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+f.station_title+'</div><div class="url">'+f.station_url+"</div></div>"}m+="</div>",h.attr("data-show","open").after(m),C(r),r.push(u),C("stationsBlockToggle №"+u+" opened"),C(r),localStorage.setItem("playerState",JSON.stringify(q))}$(".spinner").hide()}$(".spinner").show(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".spinner").hide()}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".station",function(t){P.addTrackToPlaylist($(this).data("stationId"))}),$(".playlist-new").on("click",function(t){C("::new playlist");var a=(new Date).getTime().toString().substr(6);new e(a);b.find("[data-current]").removeAttr("data-current"),b.find("[data-name="+a+"]").attr("data-current",1),q.currentPlaylist=a,C(b.find("[data-name="+a+"]")),localStorage.setItem("playerState",JSON.stringify(q))}),$(".playlistsPanel").on("click",".vmTitle",function(){var t=$(this).closest(".playlist");C(t.attr("data-current")?"Плейлист уже выбран":"::Change playlist::"+t.attr("data-name"))}),$(".showConsole").on("click",function(){return $(".console").toggleClass("hidden"),$(".consoleList").mCustomScrollbar("scrollTo",".consoleItem:last"),!1}),$(".clearConsole").on("click",function(){return $(".consoleList .mCSB_container").children().remove(),!1}),window.innerHeight<=640&&window.innerWidth<700){var k=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());C(k),$(".searchContainer, .playlistContainer","#player").height(k)}var w=$("#player .playlistContainer"),b=$("#player .playlistsPanel"),x=new Audio,T={reg:!1,auth:!1},M={},P=new a,q={playlists:{},playlistsOrder:[],currentPlaylist:"",nowPlaying:{},volume:.27,paused:x.paused,search:{stationsOpened:[]}},I={},E=[],O=new(window.AudioContext||window.webkitAudioContext),A=new o("playerTag"),R=new n,_=null,L=document.getElementById("canvas-volume"),F=L.getContext("2d"),B=L.width,N=L.height;if(L.width=100,L.height=30,void 0==localStorage.getItem("userStatus")?(C("userStatus == undefined"),localStorage.setItem("userStatus",JSON.stringify(T))):T=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("stations")&&(C("stations == undefined"),$.ajax({data:{action:"getAllStations"},success:function(t){I=JSON.parse(t);var e=0;for(var a in I)e++;var r=Math.ceil(e/100),o=[];for(var a in I)o.push(a);for(var n=0;n<r;n++){E[n]=[];for(var l=0;l<100;l++){var i=o[100*n+l];if(n==r-1&&l==e%100)break;E[n][l]=I[i]}}localStorage.setItem("stations",JSON.stringify(I)),localStorage.setItem("stationsOn100",JSON.stringify(E)),location.reload()}})),void 0==localStorage.getItem("playerState")){C("playerState == undefined");var J=new e("Default");J.tracks=[883,3207,884,3771,1330,1193,2403,7943,3210,2400,2599,4055,6369,55,885,7942],J.currentTrack={id:2400,url:"http://stream.dubstep.fm:80/256mp3",title:"Dubstep.fm - 256k MP3",scrollPosition:406},M.Default=J,M.Default.scrollPosition=0,q.currentPlaylist="Default",q.volume=.27,q.paused=!0,q.search.stationsOpened=[],localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))}else{q=JSON.parse(localStorage.getItem("playerState")),M=JSON.parse(localStorage.getItem("__playlists")),I=JSON.parse(localStorage.getItem("stations")),E=JSON.parse(localStorage.getItem("stationsOn100")),C(q),C(M),y(),S();var H=new Vue({el:".vmPlaylistsPanel",data:{edited:!1,playlistsOrder:q.playlistsOrder,playlistEdited:-1,totalPl:q.playlistsOrder.length,plWidth:84,curPl:q.currentPlaylist},computed:{currentPlaylist:function(t){return this.curPl},scrollLeft:function(){return this.plWidth*this.totalPl}},methods:{setCurrentPlaylist:function(t,e){C(q.playlistsOrder[t]),C(e),$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",b.find('[data-name="'+e+'"]').attr("data-scroll-left")),b.find('[data-name="'+q.currentPlaylist+'"]').removeAttr("data-current"),b.find('[data-name="'+e+'"]').attr("data-current",1),q.currentPlaylist=e,w.find(".mCSB_container").children().remove();var a=M[q.currentPlaylist].tracks;a.length&&P.makePlaylistTracks(a),localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))},deletePlaylist:function(t,e){C(this.playlistsOrder),C(q.playlistsOrder[t]),C(M),C(M[q.playlistsOrder[t]]),delete M[q.playlistsOrder[t]],this.playlistsOrder.splice(t,1),q.playlistsOrder=this.playlistsOrder,C(this.playlistsOrder),localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))},changeEditMode:function(t,e){C(t),C(this.playlistEdited),this.edited=!this.edited,this.edited?this.playlistEdited=t:this.playlistEdited=-1},editPlaylist:function(t,e,a){var r=$(a.target).val();q.playlistsOrder[t]=r,C($(a.target)),$(a.target).closest(".playlist").attr("data-current")&&(q.currentPlaylist=r),M[e].name=r,M[r]=M[e],delete M[e],localStorage.setItem("playerState",JSON.stringify(q)),localStorage.setItem("__playlists",JSON.stringify(M))}}});C($(".vmPlaylistsPanel")),$(".playlistsPanel .list").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:!0}}),$(".playlistsPanel .list").find(".mCSB_container").addClass("flex left"),b.find('[data-name="'+q.currentPlaylist+'"]').attr("data-current",1),C(b.find("[data-current]").attr("data-scroll-left")),$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",b.find("[data-current]").attr("data-scroll-left")),A.setVolume(q.volume||.27),R.setVolume(q.volume||.27),$("#player .volume input").val(100*A.getVolume()),$("#player .volume input").val(100*R.getVolume()),$("#player .volume .val").html(Math.floor(100*A.getVolume())),$("#player .volume .val").html(Math.floor(100*R.getVolume())),m();var D=M[q.currentPlaylist].tracks,K=b.find(".playlist:first").innerWidth();M.playlistPanelWidth=K,D.length>0?(C("make tracks:begin"),P.makePlaylistTracks(D),C("make tracks:end")):C("Выбранный плейлист пуст - нет треков");var W=new Vue({el:".currentTrackTitle",data:{trackTitle:""},computed:{title:{get:function(){return this.trackTitle},set:function(t){C(t),C(v().title),this.trackTitle=t}}},beforeCreate:function(){C("vmCurrentTrackTitle::beforeCreate")},created:function(){C("vmCurrentTrackTitle::created")},beforeMount:function(){C("vmCurrentTrackTitle::beforeMount")},mounted:function(){C("vmCurrentTrackTitle::mounted")},beforeUpdate:function(){C("vmCurrentTrackTitle::beforeUpdate")},updated:function(){C("vmCurrentTrackTitle::updated")},beforeDestroy:function(){C("vmCurrentTrackTitle::beforeDestroy")},destroyed:function(){C("vmCurrentTrackTitle::destroyed")}});q.paused||(M[q.currentPlaylist].tracks.length||H.setCurrentPlaylist(0,q.nowPlaying.playlistName),A.playStream(v().url))}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var e=JSON.parse(t);$(".loginsUniq").html("");for(var a="",r=0;r<e.length;r++){a+='<div class="fieldUniq"><div class="field">'+e[r].user_login+"</div></div>"}$(".loginsUniq").html("Used :(:<br>"+a),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function e(t,e){t.fadeOut(e)}function a(t){var e;"text"==t.attr("type")?(e=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,"От 3 до 20 символов",t.position().top):"password"==t.attr("type")&&(e=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,"От 5 символов",t.position().top);var a=t.val(),r=!0;return 0!=a.search(e)?(t.addClass("error"),r=!1):t.removeClass("error"),r}function r(t,e){return t.val()!=e.val()?(e.addClass("error"),!1):(e.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".showFormReg").attr("disabled","disabled")}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val()),$(".showFormSign").attr("disabled","disabled")}),$(".overlayFull").on("click",function(){$("form.visible").hasClass("form-reg")?$(".showFormReg").trigger("click"):$(".showFormSign").trigger("click"),$(".overlayFull").toggleClass("visible").hide(),$(".showFormSign, .showFormReg").removeAttr("disabled")}),$(".popup-overlay, .close-popup").click(function(t){e($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(e){var r=$(".form-reg .regLogin");r.val().length>2&&t(r.val()),a($(this)),e.preventDefault()}),$(".form-reg .regPass").keyup(function(){a($(this))}),$(".form-reg .regPassEx").keyup(function(){r($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var e=$(".form-reg .regLogin"),o=$(".form-reg .regPass"),n=$(".form-reg .regPassEx");return a(e)&&a(o)&&r(o,n)&&!e.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:e.val(),regPass:o.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var e=$(".form-auth .authLogin"),r=$(".form-auth .authPass");return a(e)&&a(r)&&$.ajax({data:{action:"authUser",authLogin:e.val(),authPass:r.val()},success:function(t){if(t){console.log("data");var e=JSON.parse(t);console.log(e),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+e.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(r){r=JSON.parse(r),r.length>0?a(t):e(t)}})}function e(t){var e=navigator.userAgent,a=navigator.oscpu||navigator.platform,r=screen.width+"*"+screen.height,o=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:e,platform:a,screensize:r,browsersize:o,timeonsite:1},success:function(t){}})}function a(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var r;void 0==localStorage.getItem("uniqHash")?(r=getHash(8),localStorage.setItem("uniqHash",r),e(r),console.log("+uniq visit first")):(r=localStorage.getItem("uniqHash"),t(r))}),$(document).ready(function(){function t(t){var e="Update SUCCES!"==t.result?"state-success":"state-warning";return'<div class="row"><div class="col-md-2">Запрос SQL</div>\t\t\t\t\t\t\t<div class="col-md-10">'+t.query+'</div></div>\t\t\t\t\t\t\t<br><br><div class="row '+e+'">\t\t\t\t\t\t\t<div class="col-md-2">Результат</div>\t\t\t\t\t\t\t<div class="col-md-10">'+t.result+"</div></div>"}$(".js-create-table").on("click",function(e){var a=$(this).attr("data-sql"),r=$($(this).attr("data-sql-value")+" option:selected").val();console.log(a),console.log(r),$.ajax({url:"actionsAdmin.php",data:{action:"makeSql",sqlAction:a,sqlValue:r},success:function(e){var a=JSON.parse(e);console.log(a);var r=$("#sqlResponse");modalBody=r.find(".modal-body"),responseMarkup=t(a),modalBody.html(responseMarkup),r.modal("toggle")}})}),$(".js-drop-table").on("click",function(e){var a=$(this).attr("data-sql"),r=$($(this).attr("data-sql-value")+" option:selected").val();console.log(a),console.log(r),$.ajax({url:"actionsAdmin.php",data:{action:"makeSql",sqlAction:a,sqlValue:r},success:function(e){var a=JSON.parse(e);console.log(a);var r=$("#sqlResponse");modalBody=r.find(".modal-body"),responseMarkup=t(a),modalBody.html(responseMarkup),r.modal("show")}})})});var canvasSquare=document.getElementById("square"),contextSquare=canvasSquare.getContext("2d");canvasSquare.width=1e3,canvasSquare.height=560,contextSquare.save(),contextSquare.translate(500,290);var x=canvasSquare.width/2,y=canvasSquare.height/2,ln=120,minLn=2,qtMin=5,fib=1.6180339;contextSquare.lineWidth=1,contextSquare.beginPath(),contextSquare.save();var drawFractalRound=document.getElementById("draw_round");drawFractalRound.onclick=function(){console.log(getRandom()),drawRound(10*getRandom())};var drawFractalSquare=document.getElementById("draw_square");drawFractalSquare.onclick=function(){console.log(getRandom()),drawSquare(5*getRandom())};var drawFractal=document.getElementById("add_fractal");drawFractal.onclick=function(){console.log(getRandom()),addFractal(10*getRandom())};var canvasTriangle=document.getElementById("triangle"),contextTriangle=canvasTriangle.getContext("2d");canvasTriangle.width=540,canvasTriangle.height=480,contextTriangle.translate(240,240);var x=canvasTriangle.width/2,y=canvasTriangle.height/2,ln=120,minLn=2;contextTriangle.lineWidth=1,contextTriangle.beginPath(),contextTriangle.save(),drawFractal1(120),drawFractal1(60),drawFractalTriangle(55),drawFractalTriangle(20);var canvasKoh=document.getElementById("koh"),contextKoh=canvasKoh.getContext("2d");canvasKoh.width=640,canvasKoh.height=640;var x=canvasKoh.width/2,y=canvasKoh.height/2;contextKoh.translate(x,y);var ln=50,minLn=2;contextKoh.lineWidth=1;var cos=.5,sin=Math.sqrt(3)/2,canv,ctx,canv=document.getElementById("canv");window.onload=function(){ctx=canv.getContext("2d"),canv.width=640,canv.height=640,drawKochSnowflake(320,240,280,5),ctx.stroke()};var colorsArray=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],color=new Array(6),setColor,fullColor,setColorBg,fullColorBg;setInterval(setC,100),setInterval(setBg,100),setInterval(setTreeColor,100);