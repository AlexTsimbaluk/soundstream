"use strict";function getParams(){for(var t={},a=window.location.search.substring(1).split("&"),e=0;e<a.length;e++){var r=a[e].split("=");t[r[0]]=void 0===r[1]?"":r[1]}return t}function d(t){$(".debug").html(t)}function getRandomInt(t,a){return Math.floor(Math.random()*(a-t+1))+t}function getRandomRgbColor(){return"rgb("+getRandomInt(0,255)+","+getRandomInt(0,255)+","+getRandomInt(0,255)+")"}function getHash(t){for(var a="",e=0;e<t;e++)a+=String.fromCharCode(getRandomInt(33,127));return a}function drawRound(t){if(t<=qtMin)contextSquare.stroke();else{for(var a=0;a<t;a++)contextSquare.arc(a*a*fib,3*a,fib*a,0,2*Math.PI),contextSquare.rotate(2*Math.PI*3/(t-1));drawRound(.5*t)}}function addFractal(t){if(t<=qtMin)contextSquare.stroke();else switch(getRandom()){case 1:for(var a=0;a<t/2;a++)contextSquare.strokeRect(0,0,30,20),contextSquare.strokeStyle="rgb(0,"+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+")",contextSquare.stroke(),contextSquare.rotate(3*Math.PI*2/(t-1));addFractal(.3*t);break;case 2:for(var a=0;a<t/3;a++)contextSquare.strokeRect(0,0,45,15),contextSquare.strokeStyle=a%2==0?"rgb("+Math.floor(255-255/t*a)+"0,"+Math.floor(0+255/t*a)+")":"rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+",255)",contextSquare.stroke(),contextSquare.rotate(2*Math.PI*5/(t-1));addFractal(.3*t);break;case 3:for(var a=0;a<t/2;a++)contextSquare.strokeRect(10,50,45,35),a%2==0?(contextSquare.strokeStyle="rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+","+Math.floor(255-255/t*a)+")",contextSquare.stroke()):(contextSquare.strokeStyle="rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+",255)",contextSquare.stroke()),contextSquare.rotate(3*Math.PI*4/(t-1));addFractal(.3*t);break;case 4:for(var a=0;a<t/3;a++)contextSquare.arc(10,30,45,0,2*Math.PI),contextSquare.stroke(),contextSquare.rotate(2*Math.PI*3/(t-1));addFractal(.3*t);break;case 5:for(var a=0;a<t/3;a++)contextSquare.arc(50,50,25,0,2*Math.PI),contextSquare.stroke(),contextSquare.rotate(2*Math.PI*4/(t-1));addFractal(.3*t);break;case 6:for(var a=0;a<t/4;a++)contextSquare.strokeRect(0,0,30,20),contextSquare.strokeStyle="rgb(0,"+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+")",contextSquare.stroke(),contextSquare.rotate(4*Math.PI*3/(t-1));addFractal(.3*t);break;default:for(var a=0;a<t/2;a++)contextSquare.strokeRect(30,0,getRandom()*a,getRandom()*a/1.7),contextSquare.strokeStyle=a%2==0?"rgb("+Math.floor(255-255/t*a)+"0,"+Math.floor(0+255/t*a)+")":"rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+",255)",contextSquare.stroke(),contextSquare.rotate(2*Math.PI*3/(t-1));addFractal(.5*t)}}function drawSquare(t){if(t<=qtMin)contextSquare.stroke();else{for(var a=0;a<t/2;a++)contextSquare.moveTo(10*a-100,10*a-70),contextSquare.lineTo(50+10*a,0+10*a),contextSquare.lineTo(10*a-100,70+10*a),contextSquare.rotate(2*Math.PI/(t-1));drawSquare(.5*t)}}function getRandom(){var t=10*Math.random();return t=Math.round(t)}function drawFractal1(t){for(var a=0;a<t;a++)contextTriangle.strokeRect(0,0,100,133),contextTriangle.strokeStyle=a%2==0?"rgb(0,"+Math.floor(255-255/t*a)+","+Math.floor(255-255/t*a)+")":"rgb("+Math.floor(0+255/t*a)+","+Math.floor(0+255/t*a)+",255)",contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1));for(var a=0;a<t;a++)contextTriangle.strokeRect(0,0,45,45),a%2==0?(contextTriangle.strokeStyle="rgb(0,"+Math.floor(0+255/t*a)+","+Math.floor(255-255/t*a)+")",contextTriangle.stroke()):(contextTriangle.strokeStyle="rgb("+Math.floor(0+255/t*a)+","+Math.floor(255-255/t*a)+",0)",contextTriangle.stroke()),contextTriangle.rotate(2*Math.PI*4/(t-1))}function drawFractalTriangle(t){if(t>50)for(var a=0;a<t;a++)contextTriangle.moveTo(240,40),contextTriangle.lineTo(40,240),contextTriangle.lineTo(440,240),contextTriangle.lineTo(240,40),contextTriangle.stroke(),a%2==0||(contextTriangle.strokeStyle=a%3==0?"rgb(,"+Math.floor(0+255/t*a)+"0,"+Math.floor(0+255/t*a)+")":"rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+",0)"),contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1));else for(var a=0;a<t;a++)contextTriangle.moveTo(240,40),contextTriangle.lineTo(40,240),contextTriangle.lineTo(440,240),contextTriangle.lineTo(240,40),contextTriangle.stroke(),contextTriangle.strokeStyle=a%2==0?"rgb("+Math.floor(255-255/t*a)+"0,"+Math.floor(255-255/t*a)+")":a%3==0?"rgb(0,"+Math.floor(0+255/t*a)+","+Math.floor(0+255/t*a)+")":"rgb("+Math.floor(255-255/t*a)+","+Math.floor(0+255/t*a)+","+Math.floor(255-255/t*a)+")",contextTriangle.stroke(),contextTriangle.rotate(2*Math.PI*4/(t-1))}function setC(){color[0]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[1]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[2]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[3]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[4]=colorsArray[Math.floor(Math.random()*colorsArray.length)],color[5]=colorsArray[Math.floor(Math.random()*colorsArray.length)];var t=color.toString();return setColor=t.replace(/,/g,""),fullColor="#"+setColor,canvasTriangle.style.borderColor=fullColor,fullColor}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dateStart=(new Date).getTime();$.ajaxSetup({type:"POST",url:"actions.php",complete:function(){},statusCode:{200:function(t){},403:function(t){var a=JSON.parse(t.responseText);$("body").prepend(a.message)}},error:function(t,a,e,r){consoleOutput("XHR error")}}),void 0!==getParams().admin?$("body").addClass("admin"):$("body").removeClass("admin"),$(document).ready(function(){function t(){x("function::displayState");var t,a,e=p().title,r=e.length,n=$("#player .info .trackTitle"),o=250;$("title").html(e+"::RadioRA"),x(e),n.removeClass("runningString").parent().css({width:"auto"}),t=n.width(),a=t/r,Math.floor(o/a),x(t),x(n.text()),n.addClass("runningString").parent().css({width:"220px"})}function a(t,a){this.name=t,this.tracks=[],this.currentTrack={},O.currentPlaylist=this.name,O.playlistsOrder.push(this.name),q[t]=this,localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))}function e(){var t=this;this.templateTrack=$(".template-track").html(),this.addPanel=function(t){M.find(".list .mCSB_container").append($(q[t].titleHtmlEl));var a=M.find(".playlist").length-1,e=q.playlistPanelWidth||M.find(".playlist:first").innerWidth(),r=e*a;M.find(".playlist:last").attr("data-scroll-left",r)},this.addTrackToPlaylist=function(a){var e=t.makeTrack([a]);T.hasClass("mCustomScrollbar")?T.find(".mCSB_container").append(e):T.append(e),q[O.currentPlaylist].tracks.push(+a),x(q),localStorage.setItem("__playlists",JSON.stringify(q))},this.makeTrack=function(t){for(var a=t,e=$(".template-track").html(),r=[],n=0;n<a.length;n++){var o=_[a[n]],i=$(e);i.attr("data-station-id",o.station_id),i.attr("data-station-title",o.station_title),i.attr("data-station-url",o.station_url),i.find(".title").text(o.station_title),i.find(".url").text(o.station_url),r.push(i)}return r},this.makePlaylistTracks=function(a){for(var e=(q[O.currentPlaylist],t.makeTrack(a)),r=0;r<e.length;r++){var n=e[r];T.hasClass("mCustomScrollbar")?T.find(".mCSB_container").append(n):T.append(n)}T.hasClass("mCustomScrollbar")||$(".playlistContainer").mCustomScrollbar({})},this.setCurrent=function(a,e){$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",M.find("[data-current]").attr("data-scroll-left")),M.find('[data-name="'+O.currentPlaylist+'"]').removeAttr("data-current"),M.find('[data-name="'+a+'"]').attr("data-current",1),O.currentPlaylist=a,T.find(".mCSB_container").children().remove();var r=q[O.currentPlaylist].tracks;r.length&&t.makePlaylistTracks(r),q[O.currentPlaylist].scrollPosition=e,localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))}}function r(t,a,e){var r=this,n=t.createAnalyser();n.smoothingTimeConstant=e.smoothingTimeConstant||.7,n.fftSize=e.fftSize||512,a.connect(n),n.connect(R.destination);var o=function(){n.getByteFrequencyData(r.streamData);for(var t=0,a=0;a<80;a++)t+=r.streamData[a]};setInterval(o,20);r.streamData=new Uint8Array(n.frequencyBinCount)}function n(t){var a=document.getElementById(t),e=this,n=R.createMediaElementSource(a),o=new r(R,n,{smoothingTimeConstant:.5,fftSize:1024}),l=new r(R,n,{smoothingTimeConstant:.5,fftSize:1024}),m=new r(R,n,{smoothingTimeConstant:.5,fftSize:64}),h=new r(R,n,{smoothingTimeConstant:.5,fftSize:512}),f=new r(R,n,{smoothingTimeConstant:.5,fftSize:128});this.streamData_1=o.streamData,this.streamData_2=l.streamData,this.streamData_3=m.streamData,this.streamData_4=h.streamData,this.streamData_5=f.streamData,i(a,"AudioApiElement"),this.playStream=function(t){x("AudioApiElement::playStream::Begin"),x(t);var r,n=$('[data-station-url="'+t+'"]');r=n.length?n.position().top:0,$(".playlistContainer").mCustomScrollbar("scrollTo",r),n.parent().find("[data-current-track]").removeAttr("data-current-track"),x(n),n.attr("data-current-track",1);var o={url:n.attr("data-station-url"),title:n.attr("data-station-title"),id:n.attr("data-station-id"),scrollPosition:r};q[v()].currentTrack=o,a.src=t,a.crossOrigin="anonymous",setTimeout(function(){a.crossOrigin="anonymous"},3e3);var i=a.play();void 0!==i&&i.then(function(){x("AudioApiElement::playPromise::Success::Begin"),x("AudioApiElement::playPromise::Success::End")}).catch(function(){x("AudioApiElement::playPromise::Failed::Begin"),e.stopStream(),F.playStream(t),x("Start audioCbElement"),x("AudioApiElement::playPromise::Failed::End")}),O.paused=a.paused,O.nowPlaying.playlistName?O.nowPlaying.playlistName==O.currentPlaylist?O.nowPlaying.track=o:O.nowPlaying.playlistName!=O.currentPlaylist&&(x("pppp"),O.nowPlaying.playlistName=O.currentPlaylist,O.nowPlaying.track=o):(O.nowPlaying.playlistName=O.currentPlaylist,O.nowPlaying.track=o),localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q)),(window.innerHeight>=720||window.innerWidth>=1e3)&&(O.visualisations["canvas-audio-source"].state?s():O.visualisations["canvas-audio-source-eq2"].state?c():O.visualisations["canvas-audio-source-eq3"].state?d():O.visualisations.triangle.state?u():O.visualisations.allEnabled.state&&(s(),c(),d(),u())),x("AudioApiElement::playStream::End")},this.stopStream=function(){g(),$("#player .play").removeClass("visualisation"),z.title="",$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),a.pause(),F.stopStream(),x("AudioApiElement::stopStream"),localStorage.setItem("playerState",JSON.stringify(O))},this.setVolume=function(t){a.volume=t},this.getVolume=function(){return a.volume}}function o(){var t=new Audio;i(t,"AudioCbElement"),this.playStream=function(a){x("AudioCbElement::playStream::Begin"),t.src=a,t.play(),x(t.paused),O.paused=t.paused,localStorage.setItem("playerState",JSON.stringify(O)),x("AudioCbElement::playStream::End")},this.stopStream=function(){g(),$("#player .play").removeClass("visualisation"),$("#player .info .trackTitle").html("").removeClass("runningString").parent().css({width:"auto"}),t.pause(),t.currentTime=0,O.paused=t.paused,x("AudioCbElement::stopStream"),localStorage.setItem("playerState",JSON.stringify(O))},this.setVolume=function(a){t.volume=a},this.getVolume=function(){return t.volume}}function i(a,e){a.addEventListener("abort",function(t){x(e+"::Event.type::"+t.type),$(".spinner").hide()}),a.addEventListener("canplay",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("canplaythrough",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("durationchange",function(t){}),a.addEventListener("emptied",function(t){x(e+"::Event.type::"+t.type),$(".spinner").hide()}),a.addEventListener("encrypted",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("ended",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("error",function(t){x(e+"::Event.type::"+t.type),$(".spinner").hide(),O.paused?(x("paused"),$(".track.waiting").removeClass("waiting").addClass("error-playing")):x("это невозможно")}),a.addEventListener("interruptbegin",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("interruptend",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("loadeddata",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("loadedmetadata",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("loadstart",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("mozaudioavailable",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("pause",function(t){x(e+"::Event.type::"+t.type),x("pause::"+a.paused),a.currentTime=0,O.paused=a.paused,g()}),a.addEventListener("play",function(t){x(e+"::Event.type::"+t.type),$(".spinner").show(),$("[data-current-track]").addClass("waiting")}),a.addEventListener("playing",function(r){x(e+"::Event.type::"+r.type),x("pause::"+a.paused),O.paused=a.paused,$(".spinner").hide(),$("[data-current-track]").hasClass("waiting")&&$("[data-current-track]").removeClass("waiting"),$("[data-current-track]").hasClass("error-playing")&&$("[data-current-track]").removeClass("error-playing"),m(),x(p().title),x(z.title),x(z.trackTitle),z.trackTitle=p().title,x(z.title),x(z.trackTitle),t()}),a.addEventListener("ratechange",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("seeked",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("seeking",function(t){x(e+"::Event.type::"+t.type)}),a.addEventListener("timeupdate",function(t){var e=Math.ceil(a.currentTime),r=("0"+parseInt(Math.floor(e%60))).slice(-2),n=("0"+parseInt(Math.floor(e/60)%60)).slice(-2);$("#player .time .hours").html(),$("#player .time .minutes").html(n),$("#player .time .seconds").html(r)}),a.addEventListener("stalled",function(t){x(e+"::Event.type::"+t.type),$(".spinner").hide()}),a.addEventListener("suspend",function(t){}),a.addEventListener("waiting",function(t){x(e+"::Event.type::"+t.type)})}function l(t,a,e){var r=document.getElementById(t);r.width=a,r.height=e,this.ctx=r.getContext("2d"),this.canvasWidth=r.width,this.canvasHeight=r.height}function s(){var t=new l("canvas-audio-source",500,510);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var a=0;a<L.streamData_1.length;a++){var e=L.streamData_1[a];t.ctx.fillStyle="rgb("+e+","+e+","+e+")",t.ctx.fillRect(a,t.canvasHeight/2+1,1,Math.floor(-e/1.5)),t.ctx.fillRect(a,t.canvasHeight/2-1,1,Math.floor(e/1.5))}requestAnimationFrame(s)}function c(){var t=new l("canvas-audio-source-eq2",500,510);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var a=0,e=L.streamData_2.length;a<e;a++){var r=L.streamData_2[a];t.ctx.fillStyle="rgb("+(255-r)+","+r+","+(255-r)+")",t.ctx.fillRect(e-a,t.canvasHeight/2+1,1,-r/1.5),t.ctx.fillRect(e-a,t.canvasHeight/2-1,1,r/1.5)}requestAnimationFrame(c)}function d(){var t=new l("canvas-audio-source-eq3",288,20);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight);for(var a=Math.floor(25.5),e=Math.floor(t.canvasWidth/32),r=Math.floor(t.canvasHeight/a),n=3,o=e+n,i=r+n,s=0;s<L.streamData_3.length;s++)for(var c=L.streamData_3[s],u=Math.floor(c/10),m=0;m<u;m++)t.ctx.strokeStyle="rgb("+(255-c)+","+(255-c)+","+(255-c)+")",t.ctx.strokeRect(s*o,t.canvasHeight-m*i,e,r);requestAnimationFrame(d)}function u(){var t=new l("triangle",540,510);t.ctx.clearRect(0,0,t.canvasWidth,t.canvasHeight),t.ctx.translate(t.canvasWidth/2,t.canvasHeight/2);for(var a=0;a<L.streamData_5.length;a++){var e=L.streamData_5[a]%10;t.ctx.strokeStyle="rgb(255, 255, 255)",t.ctx.strokeStyle=a%2==0?"rgb("+Math.floor(255-255/e*a)+"0,"+Math.floor(255-255/e*a)+")":a%3==0?"rgb(0,"+Math.floor(0+255/e*a)+","+Math.floor(0+255/e*a)+")":"rgb("+Math.floor(255-255/e*a)+","+Math.floor(0+255/e*a)+","+Math.floor(255-255/e*a)+")",t.ctx.moveTo(L.streamData_5[a]/3,L.streamData_5[a]),t.ctx.lineTo(L.streamData_5[a]%5,L.streamData_5[a]/1.618),t.ctx.lineTo(L.streamData_5[a]/1.618,L.streamData_5[a]),t.ctx.lineTo(L.streamData_5[a],L.streamData_5[a]),t.ctx.stroke(),t.ctx.strokeRect(0,0,L.streamData_5[a],L.streamData_5[a]),t.ctx.rotate(4*Math.PI),t.ctx.rotate(3*Math.PI/90),t.ctx.rotate(2*Math.PI),t.ctx.rotate(Math.PI/4)}requestAnimationFrame(u)}function m(){x("visualisation::Begin"),g();var t=$('.playlistContainer [data-station-id="'+p().id+'"]');t.addClass("visualisation").find(".url").addClass("runningString"),$("#player .play").addClass("visualisation");var a=Math.floor(360*Math.random()),e=a+180,r=Math.floor(360*Math.random());window.innerWidth>700&&(N=setInterval(function(){t.css({backgroundImage:"linear-gradient(to right, hsl("+ ++a%360+", 60%, 50%) 0%, hsl("+ ++e%360+", 60%, 50%) 100%)"}),$("#player .play.visualisation").css({boxShadow:"0px 0px 5px 0.4px hsl("+ ++r%360+", 100%, 50%)",borderColor:"hsl("+ ++r%360+", 100%, 50%)"}),$("#player .play.visualisation .inner").css({borderBottomColor:"hsl("+ ++r%360+", 100%, 50%)"}),$("#player .play.visualisation .outer").css({borderTopColor:"hsl("+(360-r)%360+", 100%, 50%)"})},50)),x("visualisation::End")}function g(){x("visualisationStop::Begin"),clearInterval(N),$('.playlistContainer [data-station-id="'+p().id+'"]').removeClass("visualisation").css({backgroundImage:"none"}).removeAttr("style").find(".url").removeClass("runningString"),$("#player .play").removeClass("visualisation").css({boxShadow:"none",borderColor:"#0ff"}).removeAttr("style"),x("visualisationStop::End")}function h(){var t=Math.ceil(+$("#player .volume input").val()/10);J.clearRect(0,0,B,H);for(var a=36*t,e=0,r=3,n=1,o=Math.floor(B/(n+r)),i=Math.floor(o/10*t),l=H,s=l/o,c=0;c<i;c++)J.fillStyle="hsl("+c*a/i+", 100%, 50%)",J.fillRect(c*(n+r),H-c*s-s,r,c*s+s),J.fill();e+=15}function f(t){setTimeout(function(){$(".searchContainer .close").animate({top:-(t.mcs.top-10)+"px"},150)},50)}function v(){return O.currentPlaylist}function p(){return q[v()].currentTrack}function y(t){var a,e=p(),r=$('.playlistContainer [data-station-id="'+e.id+'"]');if("prev"===t)a=r.prev();else{if("next"!==t)throw new Error("Не передано направление!");a=r.next()}if(a.length)return a.attr("data-station-url");x("no siblings")}function S(){var t=$('[data-remove="prop"]'),a=t.find(".removeItem"),e=t.find(".removeItemList"),r=[],n="";a.attr("disabled","disabled"),a.attr("title","Change item of local storage"),r.push({prop:"search.stationsOpened",name:"StationsOpened"}),r.push({prop:"volume",name:"Volume"});for(var o=0;o<r.length;o++)n+='<li class="remove" data-change-prop="'+r[o].prop+'"><a href="#">'+r[o].name+"</a></li>";e.html(n),$("[data-change-prop]").on("click",function(t){var r=$(this).attr("data-change-prop");x(r),x(a),a.attr("data-remove-prop",r),a.removeAttr("disabled"),a.html(r).attr("title","playerState."+r),$("[data-remove-prop]").on("click",function(t){var a=$(this).attr("data-remove-prop"),r=e.find('[data-change-prop="'+a+'"]');switch(a){case"search.stationsOpened":delete O.search.stationsOpened,x("delete playerState."+a);break;case"volume":delete O.volume,x("delete playerState."+a)}return x(O),localStorage.setItem("playerState",JSON.stringify(O)),$(this).html("Reset").attr("disabled","disabled").attr("title","Change prop of playerState").removeAttr("data-remove-prop"),r.remove(),!1})})}function k(){var t=$('[data-remove="item"]'),a=t.find(".removeItem"),e=t.find(".removeItemList"),r=[],n="";a.attr("disabled","disabled"),a.attr("title","Change item of local storage"),r.push({item:"playerState",name:"playerState"}),r.push({item:"stations",name:"stations"}),r.push({item:"stationsOn100",name:"stationsOn100"}),r.push({item:"uniqHash",name:"uniqHash"}),r.push({item:"userStatus",name:"userStatus"}),r.push({item:"localStorage",name:"localStorage"});for(var o=0;o<r.length;o++)n+='<li class="remove" data-change-item="'+r[o].item+'"><a href="#">'+r[o].name+"</a></li>";e.html(n),$("[data-change-item]").on("click",function(t){var r=$(this),n=r.attr("data-change-item");x(r),a.attr("data-remove-item",n),a.removeAttr("disabled"),a.html(n).attr("title","Delete::"+n),$("[data-remove-item]").on("click",function(t){var a=$(this).attr("data-remove-item"),r=e.find('[data-change-item="'+a+'"]');if("stations"==r.attr("data-change-item")||"stationsOn100"==r.attr("data-change-item"))var n=[e.find('[data-change-item="stations"]'),e.find('[data-change-item="stationsOn100"]')];switch(x(r),a){case"playerState":localStorage.removeItem(a),x("delete "+a);break;case"stations":case"stationsOn100":localStorage.removeItem("stations"),localStorage.removeItem("stationsOn100"),x("delete "+a),x("delete "+a+"On100");break;case"uniqHash":case"userStatus":localStorage.removeItem(a),x("delete "+a);break;case"localStorage":localStorage.clear(),x("delete "+a),location.reload()}return $(this).html("Clear").attr("disabled","disabled").attr("title","Change item of local storage").removeAttr("data-remove-item"),n?(e.find('[data-change-item="stations"]').remove(),e.find('[data-change-item="stationsOn100"]').remove()):r.remove(),!1})})}function C(){var t=O.visualisations,a=t.order;console.log(t,a);for(var e="",r=0,n=a.length;r<n;r++)e+='<label title="'+a[r]+'"><input type="checkbox" data-animation-name="'+a[r]+'" data-animation-state="'+t[a[r]].state+'" class="toggle-animation" /><div class=" button btn"><div class="iconWrapper"><div class="icon">'+t[a[r]].icon+"</div></div></div></label>";$(".animation-settings").append(e)}function b(t){}function x(t,a){console.log(t),a||($(".consoleList .mCSB_container").append('<div class="consoleItem">'+$(".consoleItem").length+":"+t+"</div>"),$(".consoleList").mCustomScrollbar("scrollTo",".consoleItem:last"))}if($("body").attr("data-useragent",navigator.userAgent),$.material.init(),$("body").css({background:'url("../img/bg/bg'+getRandomInt(1,10)+'.jpg") no-repeat center / cover'}),$(function(){for(var t=new Array(10),a=0;a<t.length;a++){var e="/img/bg/bg"+(a+1)+".jpg";t[a]=e}$.mbBgndGallery.buildGallery({containment:"body",timer:3e3,effTimer:11e3,shuffle:!0,effect:"fade",images:t,onChange:function(t){}})}),$(".searchContainer").mCustomScrollbar({callbacks:{onScroll:function(){f(this)}}}),$("#player .prev").click(function(t){x("prev");var a=y("prev");x(a),a&&(L.stopStream(),L.playStream(a))}),$("#player .next").click(function(t){x("next");var a=y("next");x(a),a&&(L.stopStream(),L.playStream(a))}),$("#player .play").on("click",function(t){O.paused&&(L.playStream(p().url),$(".playlistContainer").mCustomScrollbar("scrollTo",p().scrollPosition))}),$(".playlistContainer").on("click",".track",function(t){if(O.paused){var a=$(this).data("stationUrl");L.playStream(a)}else if($(this).attr("data-current-track"))L.stopStream();else{var a=$(this).data("stationUrl");L.stopStream(),L.playStream(a)}x($(this).position().top)}),$("#player .stop").click(function(t){L.stopStream()}),$(".playlistContainer").on("click",".delete",function(t){var a=$(this).parent().data("stationId"),e=q[O.currentPlaylist];return e.tracks.splice(e.tracks.indexOf(a),1),$(this).parent().remove(),localStorage.setItem("__playlists",JSON.stringify(q)),!1}),$(".playlistContainer").on("click",".canplaytest",function(t){x($(t.target).closest(".track").data("stationUrl")),t.stopPropagation()}),$(".toAdmin").on("click",function(t){return x("toAdmin"),$("body").addClass("admin"),$.ajax({data:{admin:1},success:function(t){$("#player").after(t),$("#player").hide(),$(".toPlayer").on("click",function(t){return x("toPlayer"),$(".admin-wrapper").remove(),$("body").removeClass("admin"),$("#player").fadeIn(300),!1})}}),!1}),$("#player .volume input").on("input",function(t){var a=$(this);L.setVolume(parseFloat($(this).val()/100)),F.setVolume(parseFloat($(this).val()/100)),O.volume=L.getVolume(),O.volume=F.getVolume(),$("#player .volume .val").html($(this).val()),0!=+a.val()?h(Math.ceil(+a.val()/10)):J.clearRect(0,0,B,H),localStorage.setItem("playerState",JSON.stringify(O))}),$("#player .volume").on("wheel",function(t){t=t||window.event;var a=$(this).find("input"),e=t.originalEvent.deltaY||t.originalEvent.detail||t.originalEvent.wheelDelta;return e>0&&+a.val()>0?a.val(+a.val()-2).trigger("input"):e<0&&+a.val()<100&&a.val(+a.val()+2).trigger("input"),!1}),$("#player .volume").on("click",function(t){return t=t||window.event,$(this).find("input").val(t.offsetX).trigger("input"),!1}),$("#player .find .showFieldSearch").click(function(t){$(this).toggleClass("active");var a=$(this).parent().find("input");0==a.hasClass("visible")?(a.addClass("visible").animate({opacity:1,width:190},100),setTimeout(function(){a.focus()},300)):a.removeClass("visible").animate({opacity:0,width:0},100).blur()}),$("#player .find input").on("keyup",function(t){var a=$(this).val();a.length>2&&($(".spinner").show(),$.ajax({data:{action:"search",target:a},success:function(t){var a=JSON.parse(t),e=$(".searchContainer .result"),r='<div class="total"><span>'+a.length+"</span> stations is found</div>";e.html("");for(var n=0;n<a.length;n++){var o=a[n];r+='<div class="station btn" data-station-id="'+o.station_id+'"><div class="add"><div class="icon">add</div></div><div class="title">'+o.station_title+'</div><div class="url">'+o.station_url+"</div></div>"}e.html(r),$(".spinner").hide(),$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden")}}))}),$("#player .find .showAll").on("click",function(t){if($(this).toggleClass("active"),!$(".searchContainer .result .station").length){$(".spinner").show();var a=0;for(var e in _)a++;var r=O.search.stationsOpened||[],n=$(".searchContainer .result"),o=100,i=Math.ceil(a/o),l='<div class="total"><span>'+a+"</span> stations is found</div>";n.html("");for(var s=0;s<i;s++){var c=100*s,d=100*(s+1);s==i-1&&(d=(i-1).toString()+a%100),l+='<div class="stationsBlockToggle" data-show="closed" data-block-number="'+s+'"><div class="title">'+c+".."+d+"</div></div>"}if(n.html(l),$("[data-block-number]").on("click",function(t){var a="",e=$(this).attr("data-block-number");if("closed"==$(this).attr("data-show")){var n=A[e];a+='<div class="stationsBlockList" data-stations-number='+e+">";for(var o=0;o<n.length;o++){var i=n[o];a+='<div class="station" data-station-id="'+i.station_id+'"><div class="title">'+i.station_title+'</div><div class="url">'+i.station_url+"</div></div>"}a+="</div>",$(this).after(a),$(this).attr("data-show","open"),x(r),r.push(e),x(r),r.length>3&&(x("лишний "+r[0]),$('[data-stations-number="'+r[0]+'"]').remove(),$('[data-block-number="'+r[0]+'"]').attr("data-show","closed"),x(r),r.shift(),x(r)),x("stationsBlockToggle №"+e+" opened")}else{var l=r.filter(function(t){return x("filter"),t!=e});r=l,x(r),$(this).next("[data-stations-number]").remove(),$(this).attr("data-show","closed"),x("stationsBlockToggle №"+e+" removed")}return O.search.stationsOpened=r,x(r),x(O.search),x(O.search.stationsOpened),localStorage.setItem("playerState",JSON.stringify(O)),!1}),r.length>0){var u=r[r.length-1],m=$('[data-block-number="'+u+'"]'),g="";r=[],x("targetBlock is "+u);var h=A[u];g+='<div class="stationsBlockList" data-stations-number='+u+">";for(var s=0;s<h.length;s++){var f=h[s];g+='<div class="station" data-station-id="'+f.station_id+'"><div class="add"><i class="fa fa-plus"></i></div><div class="title">'+f.station_title+'</div><div class="url">'+f.station_url+"</div></div>"}g+="</div>",m.attr("data-show","open").after(g),x(r),r.push(u),x("stationsBlockToggle №"+u+" opened"),x(r),localStorage.setItem("playerState",JSON.stringify(O))}$(".spinner").hide()}$(".spinner").show(),$(".searchContainer").hasClass("visible")?$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft"):$(".searchContainer").removeClass("searchContainerFadeOut").addClass("searchContainerFadeIn visible").parent().removeClass("playerLeft").addClass("playerRight"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".spinner").hide()}),$(".searchContainer .close").on("click",function(t){$(".showAll").removeClass("active"),window.innerHeight<=640&&window.innerWidth<700&&$(".playlistContainer").toggleClass("hidden"),$(".searchContainer").removeClass("searchContainerFadeIn visible").addClass("searchContainerFadeOut").parent().removeClass("playerRight").addClass("playerLeft")}),$(".searchContainer").on("click",".station",function(t){E.addTrackToPlaylist($(this).data("stationId"))}),$(".playlist-new").on("click",function(t){x("::new playlist");var e=(new Date).getTime().toString().substr(6);new a(e);M.find("[data-current]").removeAttr("data-current"),M.find("[data-name="+e+"]").attr("data-current",1),O.currentPlaylist=e,x(M.find("[data-name="+e+"]")),localStorage.setItem("playerState",JSON.stringify(O))}),$(".playlistsPanel").on("click",".vmTitle",function(){var t=$(this).closest(".playlist");x(t.attr("data-current")?"Плейлист уже выбран":"::Change playlist::"+t.attr("data-name"))}),$(".showConsole").on("click",function(){return $(".console").toggleClass("hidden"),$(".consoleList").mCustomScrollbar("scrollTo",".consoleItem:last"),!1}),$(".clearConsole").on("click",function(){return $(".consoleList .mCSB_container").children().remove(),!1}),$(".toggle-animation").on("change",function(t){var a=$(this),e=a.attr("data-animation-name");a.attr("data-animation-state");return console.log(O.visualisations[e].name+" - "+O.visualisations[e].state),O.visualisations[e].state&&b(O.visualisations[e].name),O.visualisations[e].state=!O.visualisations[e].state,console.log(O.visualisations[e].name+" - "+O.visualisations[e].state),localStorage.setItem("playerState",JSON.stringify(O)),!1}),window.innerHeight<=640&&window.innerWidth<700){var w=$("#player").height()-($("#player .playlistsPanel").height()+$("#player .trackContainer").height());x(w),$(".searchContainer, .playlistContainer","#player").height(w)}var T=$("#player .playlistContainer"),M=$("#player .playlistsPanel"),P=new Audio,I={reg:!1,auth:!1},q={},E=new e,O={playlists:{},playlistsOrder:[],currentPlaylist:"",nowPlaying:{},volume:.27,paused:P.paused,search:{stationsOpened:[]}},_={},A=[],R=new(window.AudioContext||window.webkitAudioContext),L=new n("playerTag"),F=new o,N=null,D=document.getElementById("canvas-volume"),J=D.getContext("2d"),B=D.width,H=D.height;if(D.width=100,D.height=30,void 0==localStorage.getItem("userStatus")?(x("userStatus == undefined"),localStorage.setItem("userStatus",JSON.stringify(I))):I=JSON.parse(localStorage.userStatus),void 0==localStorage.getItem("stations")&&(x("stations == undefined"),$.ajax({data:{action:"getAllStations"},success:function(t){_=JSON.parse(t);var a=0;for(var e in _)a++;var r=Math.ceil(a/100),n=[];for(var e in _)n.push(e);for(var o=0;o<r;o++){A[o]=[];for(var i=0;i<100;i++){var l=n[100*o+i];if(o==r-1&&i==a%100)break;A[o][i]=_[l]}}localStorage.setItem("stations",JSON.stringify(_)),localStorage.setItem("stationsOn100",JSON.stringify(A)),location.reload()}})),void 0==localStorage.getItem("playerState")){x("playerState == undefined");var W=new a("Default");W.tracks=[883,3207,884,3771,1330,1193,2403,7943,3210,2400,2599,4055,6369,55,885,7942],W.currentTrack={id:2400,url:"http://stream.dubstep.fm:80/256mp3",title:"Dubstep.fm - 256k MP3",scrollPosition:406},q.Default=W,q.Default.scrollPosition=0,O.currentPlaylist="Default",O.volume=.27,O.paused=!0,O.visualisations={},O.visualisations.order=["allEnabled","canvas-audio-source","canvas-audio-source-eq2","canvas-audio-source-eq3","triangle"],O.visualisations.allEnabled={icon:"flash_auto",name:"allEnabled",state:!0},O.visualisations["canvas-audio-source"]={icon:"graphic_eq",name:"canvas-audio-source",state:!0},O.visualisations["canvas-audio-source-eq2"]={icon:"graphic_eq",name:"canvas-audio-source-eq2",state:!0},O.visualisations["canvas-audio-source-eq3"]={icon:"equalizer",name:"canvas-audio-source-eq3",state:!0},O.visualisations.triangle={icon:"brightness_auto",name:"triangle",state:!0},O.search.stationsOpened=[],localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))}else{O=JSON.parse(localStorage.getItem("playerState")),q=JSON.parse(localStorage.getItem("__playlists")),_=JSON.parse(localStorage.getItem("stations")),A=JSON.parse(localStorage.getItem("stationsOn100")),x(O),x(q),S(),k(),C();var V=new Vue({el:".vmPlaylistsPanel",data:{edited:!1,playlistsOrder:O.playlistsOrder,playlistEdited:-1,totalPl:O.playlistsOrder.length,plWidth:84,curPl:O.currentPlaylist},computed:{currentPlaylist:function(t){return this.curPl},scrollLeft:function(){return this.plWidth*this.totalPl}},methods:{setCurrentPlaylist:function(t,a){x(O.playlistsOrder[t]),x(a),$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",M.find('[data-name="'+a+'"]').attr("data-scroll-left")),M.find('[data-name="'+O.currentPlaylist+'"]').removeAttr("data-current"),M.find('[data-name="'+a+'"]').attr("data-current",1),O.currentPlaylist=a,T.find(".mCSB_container").children().remove();var e=q[O.currentPlaylist].tracks;e.length&&E.makePlaylistTracks(e),localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))},deletePlaylist:function(t,a){x(this.playlistsOrder),x(O.playlistsOrder[t]),x(q),x(q[O.playlistsOrder[t]]),delete q[O.playlistsOrder[t]],this.playlistsOrder.splice(t,1),O.playlistsOrder=this.playlistsOrder,x(this.playlistsOrder),localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))},changeEditMode:function(t,a){x(t),x(this.playlistEdited),this.edited=!this.edited,this.edited?this.playlistEdited=t:this.playlistEdited=-1},editPlaylist:function(t,a,e){var r=$(e.target).val();O.playlistsOrder[t]=r,x($(e.target)),$(e.target).closest(".playlist").attr("data-current")&&(O.currentPlaylist=r),q[a].name=r,q[r]=q[a],delete q[a],localStorage.setItem("playerState",JSON.stringify(O)),localStorage.setItem("__playlists",JSON.stringify(q))}}});x($(".vmPlaylistsPanel")),$(".playlistsPanel .list").mCustomScrollbar({axis:"x",advanced:{autoExpandHorizontalScroll:!0}}),$(".playlistsPanel .list").find(".mCSB_container").addClass("flex left"),M.find('[data-name="'+O.currentPlaylist+'"]').attr("data-current",1),x(M.find("[data-current]").attr("data-scroll-left")),$(".playlistsPanel").find(".list").mCustomScrollbar("scrollTo",M.find("[data-current]").attr("data-scroll-left")),L.setVolume(O.volume||.27),F.setVolume(O.volume||.27),$("#player .volume input").val(100*L.getVolume()),$("#player .volume input").val(100*F.getVolume()),$("#player .volume .val").html(Math.floor(100*L.getVolume())),$("#player .volume .val").html(Math.floor(100*F.getVolume())),h();var U=q[O.currentPlaylist].tracks,j=M.find(".playlist:first").innerWidth();q.playlistPanelWidth=j,U.length>0?(x("make tracks:begin"),E.makePlaylistTracks(U),x("make tracks:end")):x("Выбранный плейлист пуст - нет треков");var z=new Vue({el:".currentTrackTitle",data:{trackTitle:""},computed:{title:{get:function(){return this.trackTitle},set:function(t){x(t),x(p().title),this.trackTitle=t}}},beforeCreate:function(){x("vmCurrentTrackTitle::beforeCreate")},created:function(){x("vmCurrentTrackTitle::created")},beforeMount:function(){x("vmCurrentTrackTitle::beforeMount")},mounted:function(){x("vmCurrentTrackTitle::mounted")},beforeUpdate:function(){x("vmCurrentTrackTitle::beforeUpdate")},updated:function(){x("vmCurrentTrackTitle::updated")},beforeDestroy:function(){x("vmCurrentTrackTitle::beforeDestroy")},destroyed:function(){x("vmCurrentTrackTitle::destroyed")}});O.visualisations.allEnabled.state?$(".toggle-animation").next(".button").find(".icon").text("flash_auto"):$(".toggle-animation").next(".button").find(".icon").text("flash_off"),O.paused||(q[O.currentPlaylist].tracks.length||V.setCurrentPlaylist(0,O.nowPlaying.playlistName),L.playStream(p().url))}}),$(window).load(function(){}),$(document).ready(function(){function t(t){$.ajax({data:{action:"loginUniq",regLogin:t},success:function(t){if(t){$(".form-reg .regLogin").addClass("busy");var a=JSON.parse(t);$(".loginsUniq").html("");for(var e="",r=0;r<a.length;r++){e+='<div class="fieldUniq"><div class="field">'+a[r].user_login+"</div></div>"}$(".loginsUniq").html("Used :(:<br>"+e),setTimeout(function(){$(".loginsUniq").html("")},4e3)}else $(".form-reg .regLogin").hasClass("error")||($(".form-reg .regLogin").removeClass("busy"),$(".loginsUniq").html("Good choice!"),setTimeout(function(){$(".loginsUniq").html("")},4e3))}})}function a(t,a){t.fadeOut(a)}function e(t){var a;"text"==t.attr("type")?(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{3,27}$/,"От 3 до 20 символов",t.position().top):"password"==t.attr("type")&&(a=/^[A-Za-zА-Яа-яЁё0-9\._-]{5,}$/,"От 5 символов",t.position().top);var e=t.val(),r=!0;return 0!=e.search(a)?(t.addClass("error"),r=!1):t.removeClass("error"),r}function r(t,a){return t.val()!=a.val()?(a.addClass("error"),!1):(a.removeClass("error"),!0)}$(".showFormSign").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-auth").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".showFormReg").attr("disabled","disabled")}),$(".showFormReg").click(function(){$(this).toggleClass("active").siblings().toggleClass("active"),$(".form-reg").toggleClass("visible").fadeToggle(300),$(".overlayFull").toggleClass("visible").fadeToggle(300),$(".form-reg .regLogin").val().length>0&&t($(".form-reg .regLogin").val()),$(".showFormSign").attr("disabled","disabled")}),$(".overlayFull").on("click",function(){$("form.visible").hasClass("form-reg")?$(".showFormReg").trigger("click"):$(".showFormSign").trigger("click"),$(".overlayFull").toggleClass("visible").hide(),$(".showFormSign, .showFormReg").removeAttr("disabled")}),$(".popup-overlay, .close-popup").click(function(t){a($(".popup-container, .popup-overlay"),500),$(":input",".popup-container").not(":button, :submit, :reset, :hidden").val("").removeAttr("checked").removeAttr("selected")}),$(".form-reg .regLogin").keyup(function(a){var r=$(".form-reg .regLogin");r.val().length>2&&t(r.val()),e($(this)),a.preventDefault()}),$(".form-reg .regPass").keyup(function(){e($(this))}),$(".form-reg .regPassEx").keyup(function(){r($(".form-reg .regPass"),$(this))}),$(".form-reg .regSubmit").click(function(t){var a=$(".form-reg .regLogin"),n=$(".form-reg .regPass"),o=$(".form-reg .regPassEx");return e(a)&&e(n)&&r(n,o)&&!a.hasClass("busy")&&$.ajax({data:{action:"regUser",regLogin:a.val(),regPass:n.val()},success:function(t){console.log("success"),$(".form-reg").fadeOut(300),$(".showFormReg").toggleClass("active").fadeToggle(300),$(".successReg").html("You have successfully signed up!").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}}),!1}),$(".form-auth .authSubmit").click(function(t){var a=$(".form-auth .authLogin"),r=$(".form-auth .authPass");return e(a)&&e(r)&&$.ajax({data:{action:"authUser",authLogin:a.val(),authPass:r.val()},success:function(t){if(t){console.log("data");var a=JSON.parse(t);console.log(a),$(".form-auth").fadeOut(300),$(".showFormSign").toggleClass("active").fadeToggle(300),$(".successAuth").html("Hi, "+a.user_login+"<br>Welcome to RA").fadeIn(300).addClass("popupHide"),setTimeout(function(){$(".overlayFull").fadeOut(500)},4e3)}else console.log("no data"),$(".errors").html("Login or password is not correct :("),setTimeout(function(){$(".errors").html("")},5e3)}}),!1})}),$(document).ready(function(){function t(t){$.ajax({data:{action:"checkUniqToday",cookie:t},success:function(r){r=JSON.parse(r),r.length>0?e(t):a(t)}})}function a(t){var a=navigator.userAgent,e=navigator.oscpu||navigator.platform,r=screen.width+"*"+screen.height,n=window.innerWidth+"*"+window.innerHeight;$.ajax({data:{action:"addVisit",cookie:t,useragent:a,platform:e,screensize:r,browsersize:n,timeonsite:1},success:function(t){}})}function e(t){$.ajax({data:{action:"addHit",cookie:t,timeonsite:1},success:function(t){}})}var r;void 0==localStorage.getItem("uniqHash")?(r=getHash(8),localStorage.setItem("uniqHash",r),a(r),console.log("+uniq visit first")):(r=localStorage.getItem("uniqHash"),t(r))}),$(document).ready(function(){function t(t){var a="Update SUCCES!"==t.result?"state-success":"state-warning";return'<div class="row"><div class="col-md-2">Запрос SQL</div>\t\t\t\t\t\t\t<div class="col-md-10">'+t.query+'</div></div>\t\t\t\t\t\t\t<br><br><div class="row '+a+'">\t\t\t\t\t\t\t<div class="col-md-2">Результат</div>\t\t\t\t\t\t\t<div class="col-md-10">'+t.result+"</div></div>"}$(".js-create-table").on("click",function(a){var e=$(this).attr("data-sql"),r=$($(this).attr("data-sql-value")+" option:selected").val();console.log(e),console.log(r),$.ajax({url:"actionsAdmin.php",data:{action:"makeSql",sqlAction:e,sqlValue:r},success:function(a){var e=JSON.parse(a);console.log(e);var r=$("#sqlResponse");modalBody=r.find(".modal-body"),responseMarkup=t(e),modalBody.html(responseMarkup),r.modal("toggle")}})}),$(".js-drop-table").on("click",function(a){var e=$(this).attr("data-sql"),r=$($(this).attr("data-sql-value")+" option:selected").val();console.log(e),console.log(r),$.ajax({url:"actionsAdmin.php",data:{action:"makeSql",sqlAction:e,sqlValue:r},success:function(a){var e=JSON.parse(a);console.log(e);var r=$("#sqlResponse");modalBody=r.find(".modal-body"),responseMarkup=t(e),modalBody.html(responseMarkup),r.modal("show")}})})});var canvasSquare=document.getElementById("square"),contextSquare=canvasSquare.getContext("2d");canvasSquare.width=1e3,canvasSquare.height=560,contextSquare.save(),contextSquare.translate(500,290);var x=canvasSquare.width/2,y=canvasSquare.height/2,ln=120,minLn=2,qtMin=5,fib=1.6180339;contextSquare.lineWidth=1,contextSquare.beginPath(),contextSquare.save();var drawFractalRound=document.getElementById("draw_round");drawFractalRound.onclick=function(){drawRound(10*getRandom())};var drawFractalSquare=document.getElementById("draw_square");drawFractalSquare.onclick=function(){drawSquare(5*getRandom())};var drawFractal=document.getElementById("add_fractal");drawFractal.onclick=function(){addFractal(10*getRandom())};var canvasTriangle=document.getElementById("triangle"),contextTriangle=canvasTriangle.getContext("2d");canvasTriangle.width=540,canvasTriangle.height=480,contextTriangle.translate(240,240);var x=canvasTriangle.width/2,y=canvasTriangle.height/2,ln=120,minLn=2;contextTriangle.lineWidth=1,contextTriangle.beginPath(),contextTriangle.save(),drawFractal1(120),drawFractalTriangle(55);var colorsArray=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],color=new Array(6),setColor,fullColor,setColorBg,fullColorBg;setInterval(setC,100),$(document).ready(function(){function t(t,a){return Math.floor(Math.random()*(a-t+1))+t}function a(){return"rgb("+t(0,255)+","+t(0,255)+","+t(0,255)+")"}function e(a,e){var r=Math.floor(255-255/a*e),n=Math.floor(0+255/a*e),o=Math.floor(255-255/a*e);return["rgb("+r+","+n+","+t(0,255)+")","rgb("+r+","+t(0,255)+","+o+")","rgb("+t(0,255)+","+n+","+o+")"][t(0,2)]}function r(t){var a=360/t;return Math.PI/180*a}function n(t,a,e,n){return t*Math.sin(r(a)*e)}function o(t,a,e,n){return t*Math.cos(r(a)*e)}function i(t,a){for(var e=[],r=0;r<a;r++){var i={x:Math.round(n(t,a,r)),y:Math.round(o(t,a,r))};console.log(i.x,i.y),console.log(i),e.push(i)}return console.log(e),e}function l(t,a,e){g.beginPath(),g.arc(t,a,e,0,2*Math.PI,!1),g.closePath(),g.stroke()}function s(t,a,e){g.translate(t,a);for(var r=0;r<e;r++)l(n(C.val(),k.val(),r),o(C.val(),k.val(),r),x.val()),u(S.val())}function c(t,a){for(var r=i(t,a),n=0;n<a;n++)s(r[n].x,r[n].y,a),g.strokeStyle=e(a,n);g.moveTo(0,0)}function d(t,a,e,r){g.beginPath(),g.moveTo(e,r),g.lineTo(e,r-1.3*a),g.lineTo(e-1.3*a,r+1.3*a),g.lineTo(e+1.3*a,r),g.closePath(),g.rotate(1.3*t),g.stroke()}function u(t){for(var a=360/t,r=Math.PI/180*a,n=0;n<t;n++)circlePointX=Math.sin(r),circlePointY=Math.cos(r),d(r*a,b.val(),circlePointX,circlePointY),g.strokeStyle=e(t,n)}var m=document.getElementById("fractal-area"),g=m.getContext("2d"),h=m.width,f=m.height;g.strokeStyle=a(),g.fillStyle=a();var v=h/2,p=f/2;g.translate(v,p);var y=$(".orbit-radius"),S=$(".triangle-point-quantity"),k=$(".fractal-quantity"),C=$(".fractal-radius"),b=$(".triangle-radius"),x=$(".shape-radius"),w=$(".draw"),T=($(".clear"),$(".spiral"),$(".orbit-radius-value")),M=$(".triangle-point-quantity-value"),P=$(".fractal-quantity-value"),I=$(".fractal-radius-value"),q=$(".triangle-radius-value"),E=$(".shape-radius-value");y.attr("max",h/2),T.text(y.val()),M.text(S.val()),P.text(k.val()),I.text(C.val()),q.text(b.val()),E.text(x.val()),$(".clear").click(function(){g.clearRect(0-v,0-p,h,f)}),w.click(function(){c(y.val(),k.val()),g.strokeStyle=a()}),$(".draw-triangle-fractal").click(function(){u(S.val()),g.strokeStyle=a()}),$("input").change(function(){T.text(y.val()),M.text(S.val()),P.text(k.val()),I.text(C.val()),q.text(b.val()),E.text(x.val()),g.strokeStyle=a()}),$(".draw-spiral").click(function(){drawSpiral(y.val())})});